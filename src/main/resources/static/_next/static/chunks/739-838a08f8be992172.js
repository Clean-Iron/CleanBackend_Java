(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{1720:(e,n,t)=>{"use strict";function a(e){if(!e)return"";let[n,t]=e.split(":"),a=new Date;return a.setHours(+n,+t),a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}t.d(n,{e:()=>a})},3539:()=>{},3747:()=>{},4619:(e,n,t)=>{"use strict";t.d(n,{AX:()=>c,El:()=>f,GZ:()=>l,JV:()=>b,Jq:()=>s,MY:()=>i,Qb:()=>N,R1:()=>j,Ue:()=>y,VU:()=>v,Yu:()=>h,_U:()=>p,bM:()=>w,co:()=>o,fS:()=>u,g_:()=>S,he:()=>x,qP:()=>m,u7:()=>r,xb:()=>d,z2:()=>g});let a=t(3464).A.create({baseURL:"https://cleaniron-cffqbcg5b9ede6fm.eastus2-01.azurewebsites.net",headers:{"Content-Type":"application/json"}}),s=async()=>{let{data:e}=await a.get("/service/all");return e},l=async e=>{let{data:n}=await a.post("/schedule",e);return n},r=async(e,n,t)=>{let{data:s}=await a.get("/schedule/servicesCity/".concat(e),{params:{year:n,month:t}});return s},c=async(e,n,t)=>{let{data:s}=await a.get("/schedule/servicesEmployee/".concat(e),{params:{year:n,month:t}});return s},i=async(e,n,t)=>{let{data:s}=await a.get("/schedule/servicesClient/".concat(e),{params:{year:n,month:t}});return s},o=async e=>{let{data:n}=await a.get("/schedule/".concat(e));return n},d=async(e,n,t,s)=>{let l={};t&&(l.city=t),e&&(l.name=e),n&&(l.surname=n);let r=Object.keys(l).length?{params:l}:{},{data:c}=await a.get("/schedule/".concat(s,"/filter"),r);return c},u=async(e,n)=>{let{data:t}=await a.patch("/schedule/".concat(e),n);return t},m=async e=>{await a.delete("/schedule/".concat(e))},h=async()=>{let{data:e}=await a.get("/client");return e},p=async e=>{let{data:n}=await a.post("/client",e);return n},x=async e=>{let{data:n}=await a.get("/client/".concat(e));return n},j=async(e,n)=>{await a.put("/client/".concat(e),n)},N=async e=>{await a.delete("/client/".concat(e))},v=async()=>{let{data:e}=await a.get("/employee");return e},f=async e=>{let{data:n}=await a.get("/employee/".concat(e));return n},g=async e=>{let{data:n}=await a.post("/employee",e);return n},b=async e=>{let{data:n}=await a.get("/employee/city/".concat(encodeURIComponent(e)));return n},y=async(e,n)=>{let{data:t}=await a.patch("/employee/update/".concat(e),n);return t},w=async e=>{await a.delete("/employee/delete/".concat(e))},S=async(e,n,t,s)=>{let{data:l}=await a.get("/employee/available",{params:{date:e,startHour:n,endHour:t,city:s}});return l}},4739:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>D});var a=t(5155),s=t(2115),l=t(6874),r=t.n(l),c=t(4619),i=t(9521),o=t(6709),d=t(7173),u=t(1720);t(3747);let m="14:00:00",h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00:00",[n,t]=(e||"0:0:0").split(":").map(Number);return 60*(n||0)+(t||0)},p=(e,n)=>Math.max(0,(h(n)-h(e))/60),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").toUpperCase().trim()},j=e=>{let n=x((null==e?void 0:e.clientCompleteName)||"");return"INCAPACIDAD"===n||n.includes("INCAPACIDAD")||n.includes("INCAPACITAD")?"INCAPACIDAD":"NO DISPONIBLE"===n||n.includes("NO DISPONIBLE")||n.includes("NO PERFORMING")||n.includes("NONPERFORMING")?"NO DISPONIBLE":null},N=e=>!!j(e),v=e=>{let{employee:n,dataServicios:t=[],currentMonth:l=null,currentYear:r=null,onServiceUpdate:c,buttonLabels:i=["TURNO 1","TURNO 2"],minDate:x=null,maxDate:v=null}=e,f=(0,s.useMemo)(()=>new Date,[]),g=null!=r?r:f.getFullYear(),b=null!=l?l:f.getMonth(),y=new Date(g,b+1,0).getDate(),[w,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null),[A,D]=(0,s.useState)(!1),[M,E]=(0,s.useState)({date:"",shiftIndex:0}),H=(0,s.useMemo)(()=>{let e=new Date(g,b,1).getDay();return 0===e?6:e-1},[g,b]),I=(0,s.useCallback)(e=>{let n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(n,"-").concat(t,"-").concat(a)},[]),L=(0,s.useCallback)(e=>{let n=new Date;return e===n.getDate()&&b===n.getMonth()&&g===n.getFullYear()},[b,g]),R=(0,s.useCallback)(e=>{if(!x&&!v)return!1;let n=new Date(g,b,e);return x&&n<x||v&&n>v},[g,b,x,v]),U=(0,s.useMemo)(()=>{let e=[];for(let n=0;n<H;n++)e.push((0,a.jsx)("div",{className:"modern-date-empty"},"empty-".concat(n)));for(let s=1;s<=y;s++){var n;let l=I(new Date(g,b,s)),r=t.filter(e=>e.serviceDate===l),c=[],o=[],d=[];r.forEach(e=>{let n=e.startHour||"00:00:00";(e.endHour||"00:00:00")<=m?c.push(e):n>=m?o.push(e):d.push(e)});let x=[null,null];o.length&&(x[1]=o[0]),c.length&&(x[0]=null!==(n=x[0])&&void 0!==n?n:c[0]),d.forEach(e=>{(h(e.startHour)+h(e.endHour))/2>=h(m)?null==x[1]?x[1]=e:null==x[0]&&(x[0]=e):null==x[0]?x[0]=e:null==x[1]&&(x[1]=e)});let v=r.filter(e=>!N(e)),f=v.reduce((e,n)=>{var t;return e+(null!==(t=n.totalServiceHours)&&void 0!==t?t:p(n.startHour,n.endHour))},0)>=8,y=r.find(e=>{var n;return N(e)&&(null!==(n=e.totalServiceHours)&&void 0!==n?n:p(e.startHour,e.endHour))>=8}),w=v.length>0,C=!!y&&!w,A=r.find(e=>{var n;return!N(e)&&(null!==(n=e.totalServiceHours)&&void 0!==n?n:p(e.startHour,e.endHour))>=8});if(C||A){f=!0;let e=C?y:A;x[0]=e,x[1]=e}let M=["modern-date-container",L(s)&&"modern-date-container-today",R(s)&&"modern-date-container-disabled"].filter(Boolean).join(" ");e.push((0,a.jsxs)("div",{className:M,children:[(0,a.jsx)("div",{className:"modern-date-number",children:s}),(0,a.jsx)("div",{className:"modern-date-buttons",children:[0,1].map(e=>{let n=x[e],t=(C||!!A)&&n&&n===(C?y:A),r=t&&1===e,c=null;if(n&&N(n))c="#DC2626";else if(n)switch(n.recurrenceType){case"PUNTUAL":c="#3B82F6";break;case"FRECUENTE":default:c="#10B981";break;case"QUINCENAL":c="#FBBF24";break;case"MENSUAL":c="#8B5CF6"}let o=null;if(n){if(r)o=null;else if(N(n)){let e=j(n);o=(0,a.jsx)("div",{className:"modern-btn-client",style:{lineHeight:1.1},children:"INCAPACIDAD"===e?"INCAPACIDAD":"NO DISPONIBLE"})}else o=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:"".concat((0,u.e)(n.startHour)," ").concat((0,u.e)(n.endHour))}),(0,a.jsx)("div",{className:"modern-btn-client",children:n.clientCompleteName})]})}else f||(o=i[e]);let d=R(s)||t&&!n||r;return(0,a.jsx)("button",{className:["modern-date-button",d&&"modern-date-button-disabled",r&&"modern-date-button-muted"].filter(Boolean).join(" "),style:c?{backgroundColor:c,color:"#fff"}:{},disabled:d,"aria-hidden":r?"true":void 0,onClick:()=>{n&&!r?(k(n),S(!0)):f||(E({date:l,shiftIndex:e}),D(!0))},children:o},"".concat(s,"-").concat(e))})})]},"day-".concat(s)))}return e},[H,y,g,b,t,L,R,i]);return(0,a.jsxs)("div",{className:"modern-calendar",role:"application","aria-label":"Calendario de selecci\xf3n de fechas",children:[(0,a.jsx)("div",{className:"modern-month-header",children:(0,a.jsxs)("h2",{className:"modern-month-title centered",children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][b]," ",g]})}),(0,a.jsx)("div",{className:"modern-weekdays",children:["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"].map((e,n)=>(0,a.jsx)("div",{className:"modern-weekday",children:e},n))}),(0,a.jsx)("div",{className:"modern-calendar-grid",children:U}),w&&C&&(0,a.jsx)(o.A,{service:C,onClose:()=>{S(!1),k(null)},onUpdate:()=>{S(!1),k(null),null==c||c()}}),A&&(0,a.jsx)(d.A,{show:A,onClose:()=>D(!1),empleado:n,date:M.date,startHour:0===M.shiftIndex?"06:00":"14:00",endHour:0===M.shiftIndex?"14:00":"22:00",onAssigned:()=>{D(!1),null==c||c()}})]})};t(9471),t(3539);let f=e=>{if(!e)return 0;let[n,t,a]=e.split(":").map(Number);return 60*(n||0)+(t||0)+Math.floor((a||0)/60)},g=e=>{let n=Math.floor(e/60);return"".concat(String(n).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},b=e=>{let{show:n,onClose:t,date:l,entries:r=[],workdayStart:c="06:00:00",workdayEnd:i="17:00:00"}=e;if(!n)return null;let o=(0,s.useMemo)(()=>f(c),[c]),d=(0,s.useMemo)(()=>f(i),[i]),u=Math.max(1,d-o),m=(0,s.useMemo)(()=>(r||[]).map(e=>{let{employee:n,busy:t=[]}=e,a=function(e,n,t){let a=(e||[]).map(e=>{let{start:a,end:s}=e;return{start:Math.max(a,n),end:Math.min(s,t)}}).filter(e=>e.end>e.start).sort((e,n)=>e.start-n.start);if(!a.length)return[];let s=[a[0]];for(let e=1;e<a.length;e++){let n=s[s.length-1],t=a[e];t.start<=n.end?n.end=Math.max(n.end,t.end):s.push(t)}return s}(t.map(e=>({start:f(e.startHour),end:f(e.endHour)})),o,d),s=function(e,n,t){let a=[];if(!e.length)return t>n&&a.push({start:n,end:t}),a;let s=n;for(let n of e)n.start>s&&a.push({start:s,end:n.start}),s=Math.max(s,n.end);return t>s&&a.push({start:s,end:t}),a}(a,o,d),l=[];if(a.length){let e=o;for(let n of a)n.start>e&&l.push({kind:"free",start:e,end:n.start}),l.push({kind:"busy",start:n.start,end:n.end}),e=n.end;e<d&&l.push({kind:"free",start:e,end:d})}else l.push({kind:"free",start:o,end:d});return{employee:n,mergedBusy:a,free:s,segments:l}}),[r,o,d]),h=(0,s.useMemo)(()=>{let e=[g(o)],n=Math.ceil(o/60),t=Math.floor(d/60);for(let a=n;a<=t;a++){let n="".concat(String(a).padStart(2,"0"),":00");n!==e[0]&&e.push(n)}let a=g(d);return e[e.length-1]!==a&&e.push(a),e},[o,d]);return(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"modal-container modal-espacios-servicios",children:[(0,a.jsx)("div",{className:"mess-header",children:(0,a.jsx)("button",{className:"mess-close",onClick:t,"aria-label":"Cerrar",children:"\xd7"})}),(0,a.jsx)("div",{className:"mess-content",children:m.map(e=>{var n;let{employee:t,mergedBusy:s,free:l,segments:r}=e;return(0,a.jsxs)("div",{className:"mess-employee-block",children:[(0,a.jsxs)("h3",{className:"mess-employee-name",children:[null==t?void 0:t.name," ",null==t?void 0:t.surname," ",(0,a.jsxs)("span",{className:"doc",children:["(",null==t?void 0:t.document,")"]})]}),(0,a.jsxs)("div",{className:"timeline",children:[(0,a.jsx)("div",{className:"timeline-bar",children:r.map((e,n)=>{let t=(e.end-e.start)/u*100;return(0,a.jsx)("span",{className:"segment ".concat(e.kind),style:{width:"".concat(t,"%")},title:"".concat("free"===e.kind?"Libre":"Asignado",": ").concat(g(e.start),"–").concat(g(e.end))},n)})}),(0,a.jsx)("div",{className:"timeline-scale",children:h.map((e,n)=>(0,a.jsx)("span",{className:"tick",children:e},"".concat(e,"-").concat(n)))}),(0,a.jsxs)("div",{className:"timeline-legend",children:[(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("i",{className:"swatch free"})," Disponible"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("i",{className:"swatch busy"})," Asignado"]})]})]}),s.length>0&&(0,a.jsxs)("details",{className:"mess-busy-details",children:[(0,a.jsx)("summary",{children:"Ver espacios asignados"}),(0,a.jsx)("ul",{className:"busy-list",children:s.map((e,n)=>(0,a.jsxs)("li",{children:[g(e.start)," – ",g(e.end)]},n))})]})]},null!==(n=null==t?void 0:t.document)&&void 0!==n?n:Math.random())})})]})})},y="06:00:00",w="17:00:00";function S(e){if(!e)return 0;let[n,t,a]=e.split(":").map(Number);return 60*n+(t||0)+(a||0)/60}let C=e=>String(e).padStart(2,"0"),k=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],A=e=>{let{city:n="",currentMonth:t=null,currentYear:l=null}=e,r=["DISPONIBLE","PERMISO/VAC"],i=(0,s.useMemo)(()=>new Date,[]),o=null!=l?l:i.getFullYear(),d=null!=t?t:i.getMonth(),u=new Date(o,d+1,0).getDate(),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[j,N]=(0,s.useState)({}),[v,f]=(0,s.useState)(!1),[g,A]=(0,s.useState)([]),[D,M]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(!n){h([]);return}try{let e=await (0,c.u7)(n,o,d+1);h(Array.isArray(e)?e:[])}catch(e){h([])}})()},[n,o,d]),(0,s.useEffect)(()=>{(async()=>{if(!n){x([]);return}try{let e=await (0,c.JV)(n);x(Array.isArray(e)?e:[])}catch(e){x([])}})()},[n]),(0,s.useEffect)(()=>{let e=S(y),n=S(w),t={};for(let a of m){let s=a.serviceDate,l=Math.max(S(a.startHour),e),r=Math.min(S(a.endHour),n);if(!(r<=l))for(let e of(t[s]||(t[s]={}),Array.isArray(a.employees)?a.employees:[])){let n=e.employeeDocument||e.document;n&&(t[s][n]||(t[s][n]=[]),t[s][n].push({start:l,end:r}))}}let a=new Set([...p.map(e=>e.document||e.employeeDocument).filter(Boolean),...m.flatMap(e=>(e.employees||[]).map(e=>e.employeeDocument)).filter(Boolean)]),s={};for(let r=1;r<=u;r++){let c=new Date(o,d,r).toISOString().slice(0,10),i=0,u=0,m=0,h=0;for(let s of a){var l;let a=function(e){if(!e.length)return[];let n=e.slice().sort((e,n)=>e.start-n.start),t=[n[0]];for(let e=1;e<n.length;e++){let a=t[t.length-1],s=n[e];s.start<=a.end?a.end=Math.max(a.end,s.end):t.push(s)}return t}(((null===(l=t[c])||void 0===l?void 0:l[s])||[]).filter(e=>e.end>e.start)),r=[];if(a.length){let t=e;for(let e of a)e.start>t&&r.push({start:t,end:e.start}),t=Math.max(t,e.end);n>t&&r.push({start:t,end:n})}else n>e&&r.push({start:e,end:n});for(let e of r){let n=e.end-e.start;i+=Math.floor(n/240),u+=Math.floor(n/240),m+=Math.floor(n/300),h+=Math.floor(n/480)}}s[r]={any:i,h4:u,h5:m,h8:h}}N(e=>{for(let n=1;n<=u;n++){let t=(null==e?void 0:e[n])||{},a=(null==s?void 0:s[n])||{};if(t.any!==a.any||t.h4!==a.h4||t.h5!==a.h5||t.h8!==a.h8)return s}return e})},[m,p,u,d,o]);let E=(0,s.useMemo)(()=>{let e=new Date(o,d,1).getDay();return 0===e?6:e-1},[o,d]),H=e=>{let n=new Date;return e===n.getDate()&&d===n.getMonth()&&o===n.getFullYear()},I=e=>{let n="".concat(o,"-").concat(C(d+1),"-").concat(C(e));M(n);let t=m.filter(e=>e.serviceDate===n).flatMap(e=>(e.employees||[]).map(e=>({document:e.employeeDocument,name:e.employeeName,surname:e.employeeSurname}))).filter(e=>e.document),a=new Map;for(let e of p){let n=e.document||e.employeeDocument;n&&a.set(n,{document:n,name:e.name,surname:e.surname})}for(let e of t)a.has(e.document)||a.set(e.document,{document:e.document,name:e.name,surname:e.surname});A(Array.from(a.values()).map(e=>{let t=m.filter(t=>t.serviceDate===n&&(t.employees||[]).some(n=>(n.employeeDocument||n.document)===e.document)).map(e=>({startHour:e.startHour,endHour:e.endHour,label:e.clientCompleteName||e.clientName||""}));return{employee:e,busy:t}})),f(!0)},L=(0,s.useMemo)(()=>{let e=[];for(let n=0;n<E;n++)e.push((0,a.jsx)("div",{className:"calendar-date-empty"},"empty-".concat(n)));for(let n=1;n<=u;n++){let t=H(n),s=j[n]||{any:0,h4:0,h5:0,h8:0},l=["calendar-date-container",t&&"calendar-date-container-today"].filter(Boolean).join(" ");e.push((0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("div",{className:"calendar-date-number",children:n}),(0,a.jsx)("div",{className:"calendar-date-buttons",children:r.map((e,t)=>(0,a.jsx)("button",{className:["calendar-date-button","calendar-date-button-".concat(t)].join(" "),onClick:0===t?()=>I(n):void 0,children:(0,a.jsxs)("span",{className:"btn-content",children:[(0,a.jsx)("span",{className:"label",children:e}),0===t&&(0,a.jsxs)("span",{className:"slots-line",children:[(0,a.jsxs)("span",{className:"slots-top",children:["4h: ",s.h4," 5h: ",s.h5]}),(0,a.jsxs)("span",{className:"slots-8h",children:["8h: ",s.h8]})]})]})},"".concat(n,"-").concat(t)))})]},"day-".concat(n)))}return e},[E,u,H,j,r,d,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"three-button-calendar",role:"application","aria-label":"Calendario de selecci\xf3n de fechas",children:[(0,a.jsx)("div",{className:"calendar-month-header",children:(0,a.jsxs)("h2",{className:"calendar-month-title centered",children:[k[d]," ",o]})}),(0,a.jsx)("div",{className:"calendar-weekdays",children:["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"].map((e,n)=>(0,a.jsx)("div",{className:"calendar-weekday",children:e},n))}),(0,a.jsx)("div",{className:"calendar-grid",children:L})]}),(0,a.jsx)(b,{show:v,onClose:()=>f(!1),date:D,entries:g,workdayStart:y,workdayEnd:w})]})},D=()=>{let[e,n]=(0,s.useState)(new Date().getMonth()),[t,l]=(0,s.useState)(new Date().getFullYear()),[o,d]=(0,s.useState)(""),{ciudades:u,isLoading:m,isError:h}=(0,i.k)(),[p,x]=(0,s.useState)([]),[j,N]=(0,s.useState)(null),[f,g]=(0,s.useState)([]),[b,y]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),[D,M]=(0,s.useState)(""),[E,H]=(0,s.useState)([]),[I,L]=(0,s.useState)(!1),R=(0,s.useRef)(null),U=(0,s.useRef)(null),F=(0,s.useRef)(null),O=(0,s.useRef)(null),P=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],T=new Date().getFullYear(),B=Array.from({length:11},(e,n)=>T-5+n);(0,s.useEffect)(()=>{o?(0,c.JV)(o).then(e=>{let n=e||[];x(n),N(null),M(""),H(n)}).catch(()=>{x([]),N(null),M(""),H([])}):(x([]),N(null),M(""),H([]))},[o]),(0,s.useEffect)(()=>{if(!j){g([]);return}let n=e+1;(0,c.AX)(j.document,t,n).then(e=>g(e)).catch(e=>{console.error(e),g([])})},[j,e,t]),(0,s.useEffect)(()=>{let e=e=>{U.current&&!U.current.contains(e.target)&&y(!1),F.current&&!F.current.contains(e.target)&&S(!1),O.current&&!O.current.contains(e.target)&&k(!1),R.current&&!R.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let J=(e,t)=>{n(t),y(!1)},G=e=>{l(e),S(!1)},Y=e=>{d(e),k(!1)},q=e=>{M(e),L(!0);let n=e.trim().toLowerCase();if(!n){H(p);return}H(p.filter(e=>{var t,a,s;let l="".concat(null!==(t=e.name)&&void 0!==t?t:""," ").concat(null!==(a=e.surname)&&void 0!==a?a:"").toLowerCase(),r=(null!==(s=e.document)&&void 0!==s?s:"").toString().toLowerCase();return l.includes(n)||r.includes(n)}))},V=e=>{N(e),M("".concat(e.name," ").concat(e.surname)),L(!1)};return(0,a.jsx)("div",{className:"resumen-layout",children:(0,a.jsxs)("div",{className:"resumen-container",children:[(0,a.jsxs)("div",{className:"filtros-toolbar",children:[(0,a.jsxs)(r(),{href:"/servicios",className:"btn-53 filtro",children:[(0,a.jsx)("div",{className:"original",children:"⬅ Regresar"}),(0,a.jsxs)("div",{className:"letters",children:[(0,a.jsx)("span",{children:"M"}),(0,a.jsx)("span",{children:"E"}),(0,a.jsx)("span",{children:"N"}),(0,a.jsx)("span",{children:"\xda"})]})]}),(0,a.jsxs)("div",{className:"dropdown filtro",ref:U,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(b?"open":""),onClick:()=>y(!b),children:[(0,a.jsx)("span",{children:P[e]}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),b&&(0,a.jsx)("div",{className:"dropdown-content",children:P.map((n,t)=>(0,a.jsx)("button",{type:"button",className:e===t?"selected":"",onClick:()=>J(n,t),children:n},t))})]}),(0,a.jsxs)("div",{className:"dropdown filtro",ref:F,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(w?"open":""),onClick:()=>S(!w),children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),w&&(0,a.jsx)("div",{className:"dropdown-content",children:B.map(e=>(0,a.jsx)("button",{type:"button",className:t===e?"selected":"",onClick:()=>G(e),children:e},e))})]}),(0,a.jsxs)("div",{className:"dropdown filtro",ref:O,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(C?"open":""," ").concat(o?"city-selected":""),onClick:()=>k(!C),children:[(0,a.jsx)("span",{children:o||"Seleccionar ciudad"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),C&&(0,a.jsxs)("div",{className:"dropdown-content",children:[o&&(0,a.jsx)("button",{type:"button",className:"clear-option",onClick:()=>Y(""),children:"Limpiar selecci\xf3n"}),m&&(0,a.jsx)("div",{children:"Cargando ciudades..."}),h&&(0,a.jsx)("div",{children:"Error al cargar ciudades"}),!m&&!h&&u.map((e,n)=>(0,a.jsx)("button",{type:"button",className:o===e?"selected":"",onClick:()=>Y(e),children:e},n))]})]}),p.length>0&&(0,a.jsxs)("div",{className:"dropdown filtro",ref:R,children:[(0,a.jsx)("input",{type:"text",placeholder:"Selec. empleado",value:D,onChange:e=>q(e.target.value),onFocus:()=>{L(!0),H(p)}}),I&&E.length>0&&(0,a.jsx)("div",{className:"dropdown-content",children:E.map(e=>(0,a.jsxs)("button",{type:"button",className:(null==j?void 0:j.document)===e.document?"selected":"",onClick:()=>V(e),children:[e.name," ",e.surname]},e.document))})]})]}),j?(0,a.jsx)(v,{employee:j,dataServicios:f,currentMonth:e,currentYear:t,onServiceUpdate:()=>{if(!j){g([]);return}let n=e+1;(0,c.AX)(j.document,t,n).then(e=>g(e)).catch(e=>{console.error(e),g([])})}}):(0,a.jsx)(A,{city:o,currentMonth:e,currentYear:t})]})})}},6709:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var a=t(5155),s=t(2115),l=t(4619),r=t(9521),c=t(1720);let i=e=>{let{service:n,onClose:t,onUpdate:i}=e,[o,d]=(0,s.useState)(n.serviceDate),u=(0,r.p)({startHour:0,endHour:24,stepMinutes:30}),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),[v,f]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[y,w]=(0,s.useState)(n.startHour||""),[S,C]=(0,s.useState)(n.endHour||""),[k,A]=(0,s.useState)(n.state||""),[D,M]=(0,s.useState)(Number.isFinite(n.breakMinutes)?n.breakMinutes:0),[E,H]=(0,s.useState)(!1),[I,L]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[F,O]=(0,s.useState)(!1),[P,T]=(0,s.useState)(!1),[B,J]=(0,s.useState)(!1),G=(0,s.useRef)(null),Y=(0,s.useRef)(null),q=(0,s.useRef)(null),V=(0,s.useRef)(null),z=Array.from({length:13},(e,n)=>5*n);(0,s.useEffect)(()=>{n.services&&h(n.services.map(e=>({id:e.idService,description:e.serviceDescription}))),n.employees&&x(n.employees.map(e=>({document:e.employeeDocument,employeeCompleteName:e.employeeCompleteName}))),b(n.comments||""),(0,l.VU)().then(f).catch(()=>f([])),(0,l.Jq)().then(N).catch(()=>N([]))},[n]),(0,s.useEffect)(()=>{let e=e=>{G.current&&!G.current.contains(e.target)&&H(!1),Y.current&&!Y.current.contains(e.target)&&L(!1),q.current&&!q.current.contains(e.target)&&U(!1),V.current&&!V.current.contains(e.target)&&O(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let _=async()=>{let e={...n,date:o,startHour:y,endHour:S,state:k,breakMinutes:Number.isFinite(D)?D:0,employeeDocuments:p.map(e=>e.document),idServices:m.map(e=>e.id),comments:g};await (0,l.fS)(n.id,e),null==i||i(),t()},Q=async()=>{confirm("\xbfEliminar este servicio?")&&(await (0,l.qP)(n.id),null==i||i(),t())};return(0,a.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,a.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"modal-datos-superiores",children:[(0,a.jsx)("input",{type:"date",value:o,onChange:e=>d(e.target.value)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Hora Inicio"}),(0,a.jsxs)("div",{className:"dropdown",ref:G,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(E?"open":""),onClick:()=>H(e=>!e),children:[(0,a.jsx)("span",{children:(0,c.e)(y)||"Hora inicio"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),E&&(0,a.jsx)("div",{className:"dropdown-content",children:u.map(e=>{let{value:n,label:t}=e;return(0,a.jsx)("button",{onClick:()=>{w(n),H(!1)},children:t},n)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Hora Fin"}),(0,a.jsxs)("div",{className:"dropdown",ref:Y,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(I?"open":""),onClick:()=>L(e=>!e),children:[(0,a.jsx)("span",{children:(0,c.e)(S)||"Hora fin"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),I&&(0,a.jsx)("div",{className:"dropdown-content",children:u.map(e=>{let{value:n,label:t}=e;return(0,a.jsx)("button",{onClick:()=>{C(n),L(!1)},children:t},n)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Descanso"}),(0,a.jsxs)("div",{className:"dropdown",ref:V,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(F?"open":""),onClick:()=>O(e=>!e),title:"Tiempo de descanso que se descontar\xe1 del total de horas",children:[(0,a.jsx)("span",{children:"".concat(D," min")}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),F&&(0,a.jsx)("div",{className:"dropdown-content",children:z.map(e=>(0,a.jsxs)("button",{onClick:()=>{M(e),O(!1)},className:D===e?"selected":"",children:[e," min"]},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Estado"}),(0,a.jsxs)("div",{className:"dropdown",ref:q,children:[(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(R?"open":""),onClick:()=>U(e=>!e),children:[(0,a.jsx)("span",{children:k||"Estado"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),R&&(0,a.jsx)("div",{className:"dropdown-content",children:["PROGRAMADA","COMPLETADA","CANCELADA"].map(e=>(0,a.jsx)("button",{onClick:()=>{A(e),U(!1)},children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"modal-asignacion-form-grid",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Cliente"}),(0,a.jsx)("input",{type:"text",readOnly:!0,value:n.clientCompleteName||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Direcci\xf3n"}),(0,a.jsx)("input",{type:"text",readOnly:!0,value:n.addressService||""})]}),(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Servicios:"}),(0,a.jsxs)("div",{className:"modal-chip-container",children:[(0,a.jsxs)("div",{className:"chips",children:[m.map(e=>(0,a.jsxs)("div",{className:"modal-chip",children:[e.description,(0,a.jsx)("span",{className:"modal-asignacion-remove-btn",onClick:()=>h(m.filter(n=>n.id!==e.id)),children:"\xd7"})]},e.id)),(0,a.jsx)("button",{type:"button",className:"modal-asignacion-add-servicio-btn",onClick:()=>T(e=>!e),children:"+"})]}),P&&(0,a.jsx)("div",{className:"modal-asignacion-dropdown-chip",children:j.filter(e=>!m.find(n=>n.id===e.id)).map(e=>(0,a.jsx)("button",{onClick:()=>{h([...m,{id:e.id,description:e.description}]),T(!1)},children:e.description},e.id))})]})]}),(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Personal Asignado:"}),(0,a.jsxs)("div",{className:"modal-chip-container",children:[(0,a.jsxs)("div",{className:"chips",children:[p.map(e=>(0,a.jsxs)("div",{className:"modal-chip",children:[e.employeeCompleteName,(0,a.jsx)("span",{className:"modal-asignacion-remove-btn",onClick:()=>x(p.filter(n=>n.document!==e.document)),children:"\xd7"})]},e.document)),(0,a.jsx)("button",{type:"button",className:"modal-asignacion-add-empleado-btn",onClick:()=>J(e=>!e),children:"+"})]}),B&&(0,a.jsx)("div",{className:"modal-asignacion-dropdown-chip",children:v.filter(e=>!p.some(n=>n.document===e.document)).map(e=>(0,a.jsxs)("button",{onClick:()=>{x([...p,{document:e.document,employeeCompleteName:"".concat(e.name," ").concat(e.surname)}]),J(!1)},children:[e.name," ",e.surname]},e.document))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Ciudad"}),(0,a.jsx)("input",{type:"text",readOnly:!0,value:n.city||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Comentarios"}),(0,a.jsx)("textarea",{rows:3,className:"modal-asignacion-textarea",value:g,onChange:e=>b(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"modal-asignacion-form-buttons",children:[(0,a.jsx)("button",{className:"modal-asignacion-btn-confirmar",onClick:_,children:"Guardar Cambios"}),(0,a.jsx)("button",{className:"modal-asignacion-btn-eliminar",onClick:Q,children:"Eliminar"}),(0,a.jsx)("button",{className:"modal-asignacion-btn-cancelar",onClick:t,children:"Cerrar"})]})]})})}},7173:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var a=t(5155),s=t(2115),l=t(4619),r=t(9521),c=t(1720);let i=e=>new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10);function o(e){let{show:n,onClose:t,recurrence:l="NINGUNA",baseDate:r,onConfirm:c}=e,o=r||i(new Date),[d,u]=(0,s.useState)(o),[m,h]=(0,s.useState)(()=>new Set([o]));(0,s.useMemo)(()=>({NINGUNA:"Sin frecuencia",PUNTUAL:"Puntual",FRECUENTE:"Frecuente",QUINCENAL:"Quincenal",MENSUAL:"Mensual"})[l]||"Fechas",[l]);let p=e=>{u(e),h(n=>new Set([...n,e]))},x=e=>{let n=new Set(m);n.delete(e),h(n)};if(!n)return null;let j=(()=>{let e=Array.from(m);return e.includes(o)?[o,...e.filter(e=>e!==o)]:e})();return(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"modal-container",children:[(0,a.jsxs)("div",{className:"modal-asignacion-form-grid",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Selecciona fecha"}),(0,a.jsx)("input",{type:"date",value:d,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Fechas seleccionadas"}),(0,a.jsx)("div",{className:"modal-chip-container",children:(0,a.jsx)("div",{className:"chips",children:0===j.length?(0,a.jsx)("div",{className:"modal-asignacion-no-opciones",children:"No hay fechas agregadas todav\xeda."}):j.map(e=>(0,a.jsxs)("div",{className:"modal-chip",children:[e,(0,a.jsx)("span",{className:"modal-asignacion-remove-btn",onClick:()=>x(e),children:"\xd7"})]},e))})})]})]}),(0,a.jsxs)("div",{className:"modal-asignacion-form-buttons",children:[(0,a.jsx)("button",{onClick:t,className:"modal-asignacion-btn-cancelar",children:"Cerrar"}),(0,a.jsx)("button",{type:"button",onClick:()=>{h(new Set([o])),u(o)},className:"modal-asignacion-btn-cancelar",children:"Restablecer al mismo d\xeda"}),(0,a.jsxs)("button",{type:"button",className:"modal-asignacion-btn-confirmar",onClick:()=>null==c?void 0:c(j),disabled:0===j.length,title:0===j.length?"Agrega al menos una fecha":"",children:["Usar ",j.length," fecha(s)"]})]})]})})}let d=["NINGUNA","PUNTUAL","FRECUENTE","QUINCENAL","MENSUAL"];function u(e){let{show:n,onClose:t,empleado:i,date:u,startHour:m,endHour:h,allEmployees:p=[],onAssigned:x}=e,j=(0,s.useRef)(null),N=(0,s.useRef)(null),v=(0,s.useRef)(null),f=(0,s.useRef)(null),g=(0,s.useRef)(null),b=(0,s.useRef)(null),y=(0,s.useRef)(null),[w,S]=(0,s.useState)(m||""),[C,k]=(0,s.useState)(h||""),[A,D]=(0,s.useState)(0),[M,E]=(0,s.useState)("NINGUNA"),[H,I]=(0,s.useState)(!1),[L,R]=(0,s.useState)([]),[U,F]=(0,s.useState)(!1),[O,P]=(0,s.useState)(!1),[T,B]=(0,s.useState)(!1),[J,G]=(0,s.useState)(!1),[Y,q]=(0,s.useState)([]),[V,z]=(0,s.useState)(!1),[_,Q]=(0,s.useState)([]),[X,Z]=(0,s.useState)([]),[K,W]=(0,s.useState)(!1),[$,ee]=(0,s.useState)([]),[en,et]=(0,s.useState)([]),[ea,es]=(0,s.useState)(null),[el,er]=(0,s.useState)(null),[ec,ei]=(0,s.useState)(""),[eo,ed]=(0,s.useState)(!1),[eu,em]=(0,s.useState)(""),eh=(0,r.p)({startHour:0,endHour:24,stepMinutes:30}),ep=e=>{var n;return(null===(n=eh.find(n=>n.value===e))||void 0===n?void 0:n.label)||(e?(0,c.e)(e):"")},ex=Array.from({length:13},(e,n)=>5*n);(0,s.useEffect)(()=>{n&&(S(m||""),k(h||""),D(0))},[n,m,h]),(0,s.useEffect)(()=>{n&&((0,l.Jq)().then(e=>Q(e||[])).catch(()=>Q([])),(0,l.Yu)().then(e=>{ee(e||[]),et(e||[]),es(null),er(null),ei("")}).catch(()=>{ee([]),et([])}))},[n]),(0,s.useEffect)(()=>{if(!n)return;let e=(e,n)=>(null==e?void 0:e.current)&&e.current.contains(n),t=n=>{let t=n.target;O&&!e(N,t)&&P(!1),T&&!e(v,t)&&B(!1),J&&!e(f,t)&&G(!1),U&&!e(j,t)&&F(!1),eo&&!e(g,t)&&ed(!1),V&&!e(b,t)&&z(!1),K&&!e(y,t)&&W(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[n,O,T,J,U,eo,V,K]);let ej=e=>{q(n=>n.some(n=>n.document===e.document)?n:[...n,e]),z(!1)},eN=e=>{q(n=>n.filter(n=>n.document!==e))},ev=e=>{Z(n=>n.some(n=>n.id===e.id)?n:[...n,e]),W(!1)},ef=e=>{Z(n=>n.filter(n=>n.id!==e))},eg=e=>{ei(e),ed(!0);let n=e.trim().toLowerCase();if(!n){et($);return}et($.filter(e=>{var t,a,s,l;let r="".concat(null!==(t=e.name)&&void 0!==t?t:""," ").concat(null!==(a=e.surname)&&void 0!==a?a:"").toLowerCase(),c=(null!==(s=e.document)&&void 0!==s?s:"").toString().toLowerCase(),i=(null!==(l=e.addresses)&&void 0!==l?l:[]).map(e=>{var n,t;return"".concat(null!==(n=e.address)&&void 0!==n?n:""," ").concat(null!==(t=e.city)&&void 0!==t?t:"").toLowerCase()}).join(" | ");return r.includes(n)||c.includes(n)||i.includes(n)}))},eb=(e,n)=>{var t;es(e),er(n),ei("".concat(e.name," ").concat(e.surname," — ").concat(null!==(t=null==n?void 0:n.address)&&void 0!==t?t:"").concat((null==n?void 0:n.city)?" (".concat(n.city,")"):"")),ed(!1)},ey=e=>{E(e),"NINGUNA"!==e?I(!0):R([])},ew=async()=>{if(!ea||0===X.length){alert("Seleccione un cliente y al menos un servicio");return}if(!w||!C){alert("Seleccione la hora de inicio y la hora de fin");return}if(!el){alert("Seleccione una direcci\xf3n para el servicio");return}let e=(L.length>0?L:[u]).map(e=>({client:ea,serviceAddress:el,employees:[i,...Y],services:X,date:e,startHour:w,endHour:C,breakMinutes:A,comments:eu,state:"PROGRAMADA",recurrenceType:"NINGUNA"===M?"PUNTUAL":M}));try{await (0,l.GZ)(e),alert("Servicio(s) asignado(s) correctamente (".concat(e.length,")")),null==x||x(),t()}catch(e){console.error(e),alert("Error al asignar servicio(s)")}};return n?(0,a.jsxs)("div",{className:"modal-overlay",children:[(0,a.jsxs)("div",{className:"modal-container",children:[(0,a.jsxs)("div",{className:"modal-datos-superiores",children:[(0,a.jsx)("span",{children:u}),(0,a.jsxs)("div",{className:"dropdown",ref:N,children:[(0,a.jsx)("span",{children:"Hora Inicio"}),(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(O?"open":""),onClick:()=>P(e=>!e),children:[(0,a.jsx)("span",{children:ep(w)||"Hora inicio"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),O&&(0,a.jsx)("div",{className:"dropdown-content",children:eh.map(e=>{let{value:n,label:t}=e;return(0,a.jsx)("button",{onClick:()=>{S(n),P(!1)},children:t},n)})})]}),(0,a.jsxs)("div",{className:"dropdown",ref:v,children:[(0,a.jsx)("span",{children:"Hora Fin"}),(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(T?"open":""),onClick:()=>B(e=>!e),children:[(0,a.jsx)("span",{children:ep(C)||"Hora fin"}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),T&&(0,a.jsx)("div",{className:"dropdown-content",children:eh.map(e=>{let{value:n,label:t}=e;return(0,a.jsx)("button",{onClick:()=>{k(n),B(!1)},children:t},n)})})]}),(0,a.jsxs)("div",{className:"dropdown",ref:f,children:[(0,a.jsx)("span",{children:"Descanso"}),(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(J?"open":""),onClick:()=>G(e=>!e),title:"Minutos de descanso que se descuentan del total (0–60)",children:[(0,a.jsx)("span",{children:"".concat(A," min")}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),J&&(0,a.jsx)("div",{className:"dropdown-content",children:ex.map(e=>(0,a.jsxs)("button",{className:A===e?"selected":"",onClick:()=>{D(e),G(!1)},children:[e," min"]},e))})]}),(0,a.jsxs)("div",{className:"dropdown",ref:j,children:[(0,a.jsx)("span",{children:"Frecuencia"}),(0,a.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(U?"open":""),onClick:()=>F(e=>!e),children:[(0,a.jsx)("span",{children:M}),(0,a.jsx)("span",{className:"arrow",children:"▼"})]}),U&&(0,a.jsx)("div",{className:"dropdown-content",children:d.map(e=>(0,a.jsx)("button",{onClick:()=>{ey(e),F(!1)},children:e},e))})]})]}),(0,a.jsxs)("div",{className:"modal-asignacion-form-grid",children:[(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Empleados"}),(0,a.jsxs)("div",{className:"modal-chip-container",ref:b,children:[(0,a.jsxs)("div",{className:"chips",children:[(0,a.jsxs)("div",{className:"modal-chip",children:[null==i?void 0:i.name," ",null==i?void 0:i.surname]}),Y.map(e=>(0,a.jsxs)("div",{className:"modal-chip",children:[e.name," ",e.surname,(0,a.jsx)("span",{className:"modal-asignacion-remove-btn",onClick:()=>eN(e.document),children:"\xd7"})]},e.document)),(0,a.jsx)("button",{type:"button",className:"modal-asignacion-add-empleado-btn",onClick:()=>z(e=>!e),children:"+"})]}),V&&(0,a.jsx)("div",{className:"modal-asignacion-dropdown-chip",children:0===p.length?(0,a.jsx)("div",{className:"modal-asignacion-no-opciones",children:"No hay empleados disponibles"}):p.filter(e=>e.document!==(null==i?void 0:i.document)&&!Y.find(n=>n.document===e.document)).map(e=>(0,a.jsxs)("button",{onClick:()=>ej(e),children:[e.name," ",e.surname]},e.document))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Clientes"}),(0,a.jsxs)("div",{className:"modal-asignacion-dropdown",ref:g,children:[(0,a.jsx)("input",{type:"text",placeholder:"Nombre del Cliente",value:ec,onChange:e=>eg(e.target.value),onFocus:()=>{ed(!0),et($),!ec&&ea&&ei("".concat(ea.name," ").concat(ea.surname))},onKeyDown:e=>{if("Enter"===e.key){if(e.preventDefault(),en.length>0){let e=en[0],n=e.addresses&&e.addresses.length>0?e.addresses[0]:null;eb(e,n)}}else"Escape"===e.key&&ed(!1)}}),eo&&(0,a.jsx)("div",{className:"modal-asignacion-dropdown-content",children:0===en.length?(0,a.jsx)("div",{className:"modal-asignacion-no-opciones",children:0===$.length?"No hay clientes disponibles":"Sin resultados"}):en.flatMap(e=>(Array.isArray(e.addresses)&&e.addresses.length>0?e.addresses:[null]).map((n,t)=>{var s;let l="".concat(e.document,"-").concat(null!==(s=null==n?void 0:n.id)&&void 0!==s?s:t),r=(null==ea?void 0:ea.document)===e.document&&!!el&&(el.id&&(null==n?void 0:n.id)&&el.id===n.id||el.address===(null==n?void 0:n.address)&&el.city===(null==n?void 0:n.city));return(0,a.jsxs)("button",{onClick:()=>eb(e,n),className:r?"selected":"",disabled:!n,title:n?"".concat(n.address).concat(n.city?" (".concat(n.city,")"):""):"Sin direcci\xf3n",children:[e.name," ",e.surname,(0,a.jsxs)("span",{className:"modal-asignacion-cliente-direccion",children:["\xa0— ",n?"".concat(n.address).concat(n.city?" (".concat(n.city,")"):""):"Sin direcci\xf3n"]})]},l)}))})]})]}),(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Servicios"}),(0,a.jsxs)("div",{className:"modal-chip-container",ref:y,children:[(0,a.jsxs)("div",{className:"chips",children:[X.map(e=>(0,a.jsxs)("div",{className:"modal-chip",children:[e.description,(0,a.jsx)("span",{className:"modal-asignacion-remove-btn",onClick:()=>ef(e.id),children:"\xd7"})]},e.id)),(0,a.jsx)("button",{type:"button",className:"modal-asignacion-add-servicio-btn",onClick:()=>W(e=>!e),children:"+"})]}),K&&(0,a.jsx)("div",{className:"modal-asignacion-dropdown-chip",children:0===_.length?(0,a.jsx)("div",{className:"modal-asignacion-no-opciones",children:"No hay servicios disponibles"}):0===_.filter(e=>!X.some(n=>n.id===e.id)).length?(0,a.jsx)("div",{className:"modal-asignacion-no-opciones",children:"Todos los servicios ya est\xe1n asignados"}):_.filter(e=>!X.some(n=>n.id===e.id)).map(e=>(0,a.jsx)("button",{onClick:()=>ev(e),children:e.description},e.id))})]})]}),L.length>0&&(0,a.jsxs)("div",{className:"modal-chip-section",children:[(0,a.jsx)("label",{children:"Fechas seleccionadas"}),(0,a.jsx)("div",{className:"modal-chip-container",children:(0,a.jsx)("div",{className:"chips",children:L.map(e=>(0,a.jsx)("div",{className:"modal-chip",children:e},e))})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Comentarios"}),(0,a.jsx)("textarea",{placeholder:"Comentarios adicionales",rows:3,className:"modal-asignacion-textarea",value:eu,onChange:e=>em(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"modal-asignacion-form-buttons",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"modal-asignacion-btn-cancelar",children:"Cancelar"}),(0,a.jsxs)("button",{type:"button",className:"modal-asignacion-btn-confirmar",onClick:ew,children:["Asignar ",L.length>0?"(".concat(L.length,")"):""]})]})]}),(0,a.jsx)(o,{show:H,onClose:()=>I(!1),recurrence:M,baseDate:u,occurrences:4,onConfirm:e=>{R(e),I(!1)}})]}):null}},9471:()=>{},9521:(e,n,t)=>{"use strict";t.d(n,{k:()=>r,p:()=>c});var a=t(838),s=t(2115);let l=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Error al cargar ciudades");return e.json()});function r(){let e="https://cleaniron-cffqbcg5b9ede6fm.eastus2-01.azurewebsites.net",{data:n,error:t}=(0,a.Ay)(e?"".concat(e,"/address/cities"):null,l);return{ciudades:n||[],isLoading:!t&&!n,isError:!!t}}function c(){let{startHour:e=0,endHour:n=24,stepMinutes:t=30}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useMemo)(()=>{let a=[];for(let s=e;s<n;s++)for(let e=0;e<60;e+=t){let n="".concat(String(s).padStart(2,"0"),":").concat(String(e).padStart(2,"0"),":00"),t=new Date;t.setHours(s,e);let l=t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});a.push({value:n,label:l})}return a},[e,n,t])}}}]);