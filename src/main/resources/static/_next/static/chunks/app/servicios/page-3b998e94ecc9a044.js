(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{456:()=>{},2372:()=>{},2589:()=>{},5241:()=>{},5255:()=>{},5746:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(5155),n=a(2115),r=a(6874),l=a.n(r);let i=e=>{let{onNavClick:s,seccionActiva:a}=e;return(0,t.jsxs)("div",{className:"menu-lateral",children:[(0,t.jsxs)(l(),{href:"/menu-principal",className:"btn-53",children:[(0,t.jsx)("div",{className:"original",children:"← Regresar"}),(0,t.jsxs)("div",{className:"letters",children:[(0,t.jsx)("span",{children:"M"}),(0,t.jsx)("span",{children:"E"}),(0,t.jsx)("span",{children:"N"}),(0,t.jsx)("span",{children:"\xda"})]})]}),(0,t.jsx)("div",{className:"menu-buttons",children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/servicios/resumenGeneral",className:"menu-btn ".concat("resumenGeneral"===a?"activo":""),children:"\uD83D\uDCC8 Resumen General"})}),(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"menu-btn ".concat("infoServicios"===a?"activo":""),onClick:()=>s("infoServicios"),children:"\uD83D\uDCDD Informaci\xf3n Tareas"})}),(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"menu-btn ".concat("infoDisponibilidad"===a?"activo":""),onClick:()=>s("infoDisponibilidad"),children:"\uD83D\uDD0D Buscar Disponibilidad"})}),(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"menu-btn ".concat("infoGeneral"===a?"activo":""),onClick:()=>s("editarTarea"),children:"✏️ Editar Tarea"})})]})})]})};var c=a(4739);a(456);let o=e=>{let{onDateSelect:s,initialDate:a=null,minDate:r=null,maxDate:l=null}=e,[i,c]=(0,n.useState)(new Date),[o,d]=(0,n.useState)(()=>{if(a){let e=new Date(a);return isNaN(e.getTime())?new Date:e}return new Date}),u=i.getFullYear(),m=i.getMonth(),h=new Date(u,m+1,0).getDate(),p=(0,n.useMemo)(()=>{let e=new Date(u,m,1).getDay();return 0===e?6:e-1},[u,m]),x=(0,n.useCallback)(e=>{if(!e||isNaN(e.getTime()))return"";let s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(t)},[]),j=(0,n.useCallback)(e=>{let s=new Date;return e===s.getDate()&&m===s.getMonth()&&u===s.getFullYear()},[m,u]),v=(0,n.useCallback)(e=>o.getDate()===e&&o.getMonth()===m&&o.getFullYear()===u,[o,m,u]),N=(0,n.useCallback)(e=>{let s=new Date(u,m,e);return!!r&&!!(s<r)||!!l&&!!(s>l)},[u,m,r,l]),b=(0,n.useCallback)(e=>{if(N(e))return;let a=new Date(u,m,e);d(a);let t=x(a);null==s||s(t)},[u,m,N,x,s]),g=(0,n.useMemo)(()=>{let e=[];for(let s=0;s<p;s++)e.push((0,t.jsx)("div",{className:"calendar-day empty"},"empty-".concat(s)));for(let s=1;s<=h;s++){let a=j(s),n=v(s),r=N(s),l=["calendar-day",n&&"selected",a&&"today",r&&"disabled"].filter(Boolean).join(" ");e.push((0,t.jsx)("button",{className:l,onClick:()=>b(s),disabled:r,"aria-label":"Seleccionar ".concat(s," de ").concat(i.toLocaleDateString("es-ES",{month:"long"})," ").concat(u),"aria-pressed":n,children:(0,t.jsx)("span",{className:"day-number",children:s})},"day-".concat(s)))}return e},[p,h,j,v,N,b,i,u]),C=(0,n.useCallback)(e=>{c(s=>{let a=new Date(s);return a.setMonth(s.getMonth()+e),a})},[]);return(0,t.jsxs)("div",{className:"calendar-container",role:"application","aria-label":"Calendario de selecci\xf3n de fechas",children:[(0,t.jsxs)("div",{className:"calendar-header",children:[(0,t.jsx)("button",{className:"month-nav-btn",onClick:()=>C(-1),"aria-label":"Mes anterior",type:"button",children:"‹"}),(0,t.jsx)("div",{className:"month-year-container",children:(0,t.jsxs)("h2",{className:"month-title",children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][m]," ",u]})}),(0,t.jsx)("button",{className:"month-nav-btn",onClick:()=>C(1),"aria-label":"Mes siguiente",type:"button",children:"›"})]}),(0,t.jsx)("div",{className:"weekdays-header",role:"row",children:["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"].map((e,s)=>(0,t.jsx)("div",{className:"weekday",role:"columnheader",children:e},s))}),(0,t.jsx)("div",{className:"calendar-grid",role:"grid",children:g})]})};var d=a(4619);let u=e=>{let{service:s,onClose:a}=e;return s?(0,t.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,t.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"modal-datos-superiores",children:[(0,t.jsxs)("span",{children:["Hora: ",s.time]}),(0,t.jsxs)("span",{children:["N\xfamero de Horas: ",s.hours]}),(0,t.jsxs)("span",{children:["Estado: ",s.state]})]}),(0,t.jsxs)("div",{className:"modal-asignacion-form-grid",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Cliente"}),(0,t.jsx)("input",{type:"text",readOnly:!0,value:s.client})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Direcci\xf3n"}),(0,t.jsx)("input",{type:"text",readOnly:!0,value:s.address})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Ciudad"}),(0,t.jsx)("input",{type:"text",readOnly:!0,value:s.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Comentarios"}),(0,t.jsx)("input",{type:"text",readOnly:!0,value:s.comments})]}),(0,t.jsxs)("div",{className:"modal-chip-section",children:[(0,t.jsx)("label",{children:"Servicios"}),(0,t.jsx)("div",{className:"modal-chip-container",children:(0,t.jsx)("div",{className:"chips",children:s.type.split(",").map((e,s)=>(0,t.jsx)("div",{className:"modal-chip",children:e.trim()},s))})})]}),(0,t.jsxs)("div",{className:"modal-chip-section",children:[(0,t.jsx)("label",{children:"Personal Asignado"}),(0,t.jsx)("div",{className:"modal-chip-container",children:(0,t.jsx)("div",{className:"chips",children:s.staff.split(",").map((e,s)=>(0,t.jsx)("div",{className:"modal-chip",children:e.trim()},s))})})]})]}),(0,t.jsx)("div",{className:"modal-asignacion-form-buttons",children:(0,t.jsx)("button",{className:"modal-asignacion-btn-cancelar",onClick:a,children:"Cerrar"})})]})}):null};var m=a(9521);a(2589);let h=e=>{let{selectedDate:s}=e,[a,r]=(0,n.useState)("todos"),[l,i]=(0,n.useState)("todas"),{ciudades:c,isLoading:o}=(0,m.k)(),[h,p]=(0,n.useState)(""),[x,j]=(0,n.useState)([]),[v,N]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),[C,f]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[D,S]=(0,n.useState)(!1),A=e=>e&&Array.isArray(e)?e.map(e=>({id:e.id,time:((e,s)=>{if(!e||!s)return"Hora no especificada";let a=e=>{let[s,a]=e.split(":");return"".concat(s,":").concat(a)};return"".concat(a(e)," - ").concat(a(s))})(e.startHour,e.endHour),hours:e.totalServiceHours,type:e.services.map(e=>e.serviceDescription.trim()).join(", ")||"Servicio no especificado",client:e.clientCompleteName||"".concat(e.clientName||""," ").concat(e.clientSurname||"").trim()||"Cliente no especificado",address:e.addressService||"Direcci\xf3n no especificada",city:e.city||"Ciudad no especificada",staff:(e=>e&&0!==e.length?e.map(e=>e.employeeCompleteName||"".concat(e.employeeName||""," ").concat(e.employeeSurname||"").trim()).join(", "):"Personal no asignado")(e.employees),completed:"COMPLETADA"===e.state,state:e.state||"DESCONOCIDO",comments:e.comments||"Sin comentarios",clientDocument:e.clientDocument})):[];(0,n.useEffect)(()=>{let e=async()=>{N(!0);try{let e=await (0,d.co)(s),a=A(e);j(a)}catch(e){console.error("Error al cargar servicios:",e),j([])}finally{N(!1)}};s&&e()},[s]);let k=x.filter(e=>{let s=(()=>{switch(a){case"todos":default:return!0;case"programada":return"PROGRAMADA"===e.state;case"completada":return"COMPLETADA"===e.state;case"cancelada":return"CANCELADA"===e.state}})(),t="todas"===l||e.city===l,n=""===h||e.client.toLowerCase().includes(h.toLowerCase())||e.staff.toLowerCase().includes(h.toLowerCase())||e.type.toLowerCase().includes(h.toLowerCase());return s&&t&&n});return(0,n.useEffect)(()=>{let e=e=>{e.target.closest(".filter-dropdown-container")||(y(!1),S(!1))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,t.jsxs)("div",{className:"service-list-container",children:[(0,t.jsxs)("div",{className:"filter-controls",children:[(0,t.jsxs)("div",{className:"search-container",children:[(0,t.jsx)("input",{type:"text",placeholder:"Buscar cliente, personal o servicio...",value:h,onChange:e=>p(e.target.value),className:"search-input"}),(0,t.jsx)("span",{className:"search-icon",children:"\uD83D\uDD0D"})]}),(0,t.jsxs)("div",{className:"filters-wrapper",children:[(0,t.jsxs)("div",{className:"filter-dropdown-container",children:[(0,t.jsxs)("button",{className:"filter-dropdown-btn",onClick:e=>{e.stopPropagation(),y(!w),S(!1)},children:["Estado: ",(e=>{switch(e){case"todos":return"Todos";case"programada":return"Programados";case"completada":return"Completados";case"cancelada":return"Cancelados";default:return e.charAt(0).toUpperCase()+e.slice(1)}})(a),(0,t.jsx)("span",{className:"dropdown-arrow",children:"▼"})]}),w&&(0,t.jsxs)("div",{className:"dropdown-menu",children:[(0,t.jsx)("div",{className:"dropdown-item ".concat("todos"===a?"active":""),onClick:()=>{r("todos"),y(!1)},children:"Todos"}),(0,t.jsx)("div",{className:"dropdown-item ".concat("programada"===a?"active":""),onClick:()=>{r("programada"),y(!1)},children:"Programados"}),(0,t.jsx)("div",{className:"dropdown-item ".concat("completada"===a?"active":""),onClick:()=>{r("completada"),y(!1)},children:"Completados"}),(0,t.jsx)("div",{className:"dropdown-item ".concat("cancelada"===a?"active":""),onClick:()=>{r("cancelada"),y(!1)},children:"Cancelados"})]})]}),(0,t.jsxs)("div",{className:"filter-dropdown-container",children:[(0,t.jsxs)("button",{className:"filter-dropdown-btn",onClick:e=>{e.stopPropagation(),S(!D),y(!1)},children:["Ciudad: ","todas"===l?"Todas":l,(0,t.jsx)("span",{className:"dropdown-arrow",children:"▼"})]}),D&&(0,t.jsxs)("div",{className:"dropdown-menu",children:[(0,t.jsx)("div",{className:"dropdown-item ".concat("todas"===l?"active":""),onClick:()=>{i("todas"),S(!1)},children:"Todas"}),o?(0,t.jsx)("div",{className:"dropdown-item disabled",children:"Cargando ciudades…"}):(c||[]).map(e=>(0,t.jsx)("div",{className:"dropdown-item ".concat(l===e?"active":""),onClick:()=>{i(e),S(!1)},children:e},e))]})]})]})]}),(0,t.jsx)("div",{className:"services-list",children:v?(0,t.jsx)("div",{className:"loading-indicator",children:"Cargando servicios..."}):k.length>0?k.map(e=>(0,t.jsxs)("div",{className:"service-card",onClick:()=>{g(e),f(!0)},style:{cursor:"pointer"},children:[(0,t.jsxs)("div",{className:"service-header",children:[(0,t.jsxs)("h3",{children:[e.time," | ",e.type+" "]}),(0,t.jsx)("div",{className:"status-indicator ".concat("COMPLETADA"===e.state?"completed":"PROGRAMADA"===e.state?"scheduled":"CANCELADA"===e.state?"cancelled":"unknown"),children:"COMPLETADA"===e.state?(0,t.jsx)("span",{children:"✓"}):"PROGRAMADA"===e.state?(0,t.jsx)("span",{children:"\uD83D\uDCC5"}):"CANCELADA"===e.state?(0,t.jsx)("span",{children:"❌"}):(0,t.jsx)("span",{children:"❓"})})]}),(0,t.jsxs)("div",{className:"service-details",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"N\xfamero de Horas:"})," ",e.hours]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Cliente:"})," ",e.client]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n:"})," ",e.address]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ciudad:"})," ",e.city]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Personal:"})," ",e.staff]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Estado:"})," ",(0,t.jsx)("span",{className:"status-text ".concat(e.state.toLowerCase()),children:e.state})]})]})]},e.id)):(0,t.jsx)("div",{className:"no-results",children:s?"No hay servicios programados para esta fecha.":"Selecciona una fecha para ver los servicios."})}),(0,t.jsx)(u,{service:b,onClose:()=>{f(!1),g(null)}})]})},p=()=>{let[e,s]=(0,n.useState)("");return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)(o,{className:!0,onDateSelect:e=>{s(e)}}),(0,t.jsx)(h,{selectedDate:e})]})};var x=a(7173);a(5255);let j=e=>{let{employees:s,date:a,startHour:r,endHour:l,city:i,onAssigned:c}=e,[o,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null);return(0,t.jsxs)("div",{className:"container-espacios-disponibles",children:[(0,t.jsx)("div",{className:"espacios-scroll",children:s.length>0?s.map((e,s)=>(0,t.jsxs)("div",{className:"espacio-card",children:[(0,t.jsxs)("div",{className:"espacio-info",children:[(0,t.jsxs)("h4",{className:"espacio-nombre",children:[e.name," ",e.surname]}),(0,t.jsx)("p",{className:"espacio-direccion",children:e.addressResidence})]}),(0,t.jsx)("button",{className:"reserva-button",onClick:()=>{m(e),d(!0)},children:"Asignar"})]},e.document||s)):(0,t.jsx)("div",{className:"no-results",children:(0,t.jsx)("p",{children:"Realiza una b\xfasqueda para ver los espacios disponibles."})})}),o&&u&&(0,t.jsx)(x.A,{show:o,onClose:()=>{d(!1),m(null)},empleado:u,date:a,startHour:r,endHour:l,allEmployees:s,onAssigned:()=>{d(!1),m(null),null==c||c()}})]})};a(2372);let v=e=>{var s,a;let{onEmployeesUpdate:r}=e,[l,i]=(0,n.useState)(new Date().toISOString().split("T")[0]),[c,o]=(0,n.useState)("10:00:00"),[u,h]=(0,n.useState)("13:00:00"),[p,x]=(0,n.useState)(""),{ciudades:j,isLoading:v}=(0,m.k)(),N=(0,m.p)({startHour:0,endHour:24,stepMinutes:30}),[b,g]=(0,n.useState)(!1),[C,f]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),D=(0,n.useRef)(null),S=(0,n.useRef)(null),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{D.current&&!D.current.contains(e.target)&&g(!1),S.current&&!S.current.contains(e.target)&&f(!1),A.current&&!A.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let k=async()=>{try{let e=await (0,d.g_)(l,c,u,p);r(Array.isArray(e)?e:[],l,c,u,p)}catch(e){console.error("Error al buscar disponibilidad:",e),r([],l,c,u,p)}};return(0,t.jsxs)("div",{className:"filter-container",children:[(0,t.jsx)("input",{type:"date",value:l,onChange:e=>i(e.target.value),style:{marginBottom:20}}),(0,t.jsxs)("div",{className:"dropdown",style:{marginBottom:20},ref:D,children:[(0,t.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(b?"open":""),onClick:()=>g(e=>!e),children:[(0,t.jsx)("span",{children:null===(s=N.find(e=>e.value===c))||void 0===s?void 0:s.label}),(0,t.jsx)("span",{className:"arrow",children:"▼"})]}),b&&(0,t.jsx)("div",{className:"dropdown-content",children:N.map((e,s)=>(0,t.jsx)("button",{type:"button",onClick:()=>{o(e.value),g(!1)},children:e.label},s))})]}),(0,t.jsxs)("div",{className:"dropdown",style:{marginBottom:20},ref:S,children:[(0,t.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(C?"open":""),onClick:()=>f(e=>!e),children:[(0,t.jsx)("span",{children:null===(a=N.find(e=>e.value===u))||void 0===a?void 0:a.label}),(0,t.jsx)("span",{className:"arrow",children:"▼"})]}),C&&(0,t.jsx)("div",{className:"dropdown-content",children:N.map((e,s)=>(0,t.jsx)("button",{type:"button",onClick:()=>{h(e.value),f(!1)},children:e.label},s))})]}),(0,t.jsxs)("div",{className:"dropdown",ref:A,children:[(0,t.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(w?"open":""),onClick:()=>y(e=>!e),children:[(0,t.jsx)("span",{children:p||(v?"Cargando ciudades…":"Seleccionar ciudad")}),(0,t.jsx)("span",{className:"arrow",children:"▼"})]}),w&&(0,t.jsx)("div",{className:"dropdown-content",children:v?(0,t.jsx)("div",{className:"loading",children:"Cargando…"}):j.map((e,s)=>(0,t.jsx)("button",{type:"button",onClick:()=>{x(e),y(!1)},children:e},s))})]}),(0,t.jsx)("button",{onClick:k,className:"search-button",children:"BUSCAR DISPONIBILIDAD"})]})},N=()=>{let[e,s]=(0,n.useState)([]),[a,r]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),h=async()=>{try{let e=await (0,d.g_)(a,l,c,u);s(Array.isArray(e)?e:[])}catch(e){console.error("Error refrescando disponibilidad:",e),s([])}};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)(v,{onEmployeesUpdate:(e,a,t,n,l)=>{s(e),r(a),i(t),o(n),m(l)}}),(0,t.jsx)(j,{employees:e,date:a,startHour:l,endHour:c,city:u,onAssigned:h})]})},b=e=>{let{onResultado:s}=e,[a,r]=(0,n.useState)(new Date().toISOString().split("T")[0]),[l,i]=(0,n.useState)(!1),[c,o]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[p,x]=(0,n.useState)([]),[j,v]=(0,n.useState)(""),[N,b]=(0,n.useState)(""),[g,C]=(0,n.useState)([]),[f,w]=(0,n.useState)([]),[y,D]=(0,n.useState)(!1),[S,A]=(0,n.useState)(!1),[k,E]=(0,n.useState)(!1),L=(0,n.useRef)(null),M=(0,n.useRef)(null),R=(0,n.useRef)(null),{ciudades:O,isLoading:P,isError:T}=(0,m.k)(),H=[...new Set(p.map(e=>e.name))],B=[...new Set(p.map(e=>e.surname))];(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,d.Yu)();x(e)}catch(e){console.error("Error al cargar personas:",e)}})()},[]),(0,n.useEffect)(()=>{let e=e=>{L.current&&!L.current.contains(e.target)&&M.current&&!M.current.contains(e.target)&&R.current&&!R.current.contains(e.target)&&(E(!1),D(!1),A(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let q=async()=>{i(!0),o(!1);try{let e=await (0,d.xb)(j,N,u,a);e?s(e,{nombre:j,apellido:N,selectedCity:u,date:a}):(s(null),o(!0))}catch(e){console.error("Error en la b\xfasqueda:",e),s(null),o(!0)}finally{i(!1)}},G=e=>{v(e),D(!0),C(H.filter(s=>s.toLowerCase().includes(e.toLowerCase())))},I=e=>{b(e),A(!0),w(B.filter(s=>s.toLowerCase().includes(e.toLowerCase())))};return(0,t.jsxs)("div",{className:"busqueda-form-grid",children:[(0,t.jsx)("input",{type:"date",value:a,onChange:e=>r(e.target.value),className:"busqueda-full-width"}),(0,t.jsxs)("div",{className:"dropdown",ref:M,children:[(0,t.jsx)("input",{type:"text",placeholder:"Nombre del Cliente",value:j,onChange:e=>G(e.target.value),onFocus:()=>G(j)}),y&&g.length>0&&(0,t.jsx)("div",{className:"dropdown-content",children:g.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{v(e),D(!1)},children:e},e))})]}),(0,t.jsxs)("div",{className:"dropdown",ref:R,children:[(0,t.jsx)("input",{type:"text",placeholder:"Apellido del Cliente",value:N,onChange:e=>I(e.target.value),onFocus:()=>I(N)}),S&&f.length>0&&(0,t.jsx)("div",{className:"dropdown-content",children:f.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{b(e),A(!1)},children:e},e))})]}),(0,t.jsxs)("div",{className:"dropdown busqueda-full-width",ref:L,children:[(0,t.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(k?"open":""),onClick:()=>E(e=>!e),children:[(0,t.jsx)("span",{children:u||"Seleccionar ciudad"}),(0,t.jsx)("span",{className:"arrow",children:"▼"})]}),k&&(0,t.jsxs)("div",{className:"dropdown-content busqueda-full-width",children:[P&&(0,t.jsx)("div",{children:"Cargando ciudades…"}),T&&(0,t.jsx)("div",{children:"Error al cargar ciudades"}),!P&&!T&&O.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{h(e),E(!1)},children:e},e))]})]}),(0,t.jsx)("div",{className:"busqueda-form-buttons busqueda-full-width",children:(0,t.jsx)("button",{type:"button",onClick:q,className:"menu-btn",children:l?"Buscando...":"\uD83D\uDD0D BUSCAR"})}),c&&(0,t.jsx)("p",{className:"no-results",children:"no se encontraron resultados"})]})};var g=a(6709),C=a(1720);let f=e=>{let{data:s=[],servicios:a=[],onNuevaBusqueda:r,onRecargar:l}=e,[i,c]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),x=s&&s.length>0?s:a;(0,n.useEffect)(()=>{c(!0),setTimeout(()=>{m(x||[]),c(!1)},1e3)},[x]);let j=async()=>{l?await l():m(await obtenerServicios())},v=e=>e.map(e=>e.employeeCompleteName.trim()).join(", "),N=e=>e.map(e=>e.serviceDescription.trim()).join(", ");return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"400px"},children:[(0,t.jsx)("div",{className:"services-list",style:{marginBottom:"20px"},children:i?(0,t.jsx)("div",{className:"loading-indicator",children:"Cargando servicios..."}):u.length>0?u.map(e=>(0,t.jsxs)("div",{className:"service-card",onClick:()=>{d(e),p(!0)},children:[(0,t.jsxs)("div",{className:"service-header",children:[(0,t.jsxs)("h3",{children:[(0,C.e)(e.startHour)," - ",(0,C.e)(e.endHour)," | ",N(e.services)||"Servicio"]}),(0,t.jsx)("div",{className:"status-indicator ".concat("COMPLETADA"===e.state?"completed":"PROGRAMADA"===e.state?"scheduled":"CANCELADA"===e.state?"cancelled":"unknown"),children:"COMPLETADA"===e.state?"✓":"PROGRAMADA"===e.state?"\uD83D\uDCC5":"CANCELADA"===e.state?"❌":"?"})]}),(0,t.jsxs)("div",{className:"service-details",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Cliente:"})," ",e.clientName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n:"})," ",e.addressService]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ciudad:"})," ",e.city]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Empleados:"})," ",v(e.employees)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Estado:"})," ",(0,t.jsx)("span",{className:"status-text ".concat(e.state.toLowerCase()),children:e.state})]}),e.comments&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Comentarios:"})," ",e.comments]})]})]},e.id)):(0,t.jsx)("div",{className:"no-results",children:"No hay servicios programados para esta fecha."})}),u.length>0?(0,t.jsx)("div",{className:"busqueda-form-buttons busqueda-full-width",style:{marginBottom:"10px"},children:(0,t.jsx)("button",{type:"reset",className:"cancel-btn",onClick:r,children:"❌ CANCELAR"})}):(0,t.jsx)("div",{className:"busqueda-form-buttons busqueda-full-width",children:(0,t.jsx)("button",{type:"button",className:"menu-btn",onClick:r,children:"\uD83D\uDD0D NUEVA B\xdaSQUEDA"})}),h&&o&&(0,t.jsx)(g.A,{service:o,onClose:()=>{p(!1),d(null)},onUpdate:j})]})};a(5241);let w=()=>{let[e,s]=(0,n.useState)(null),[a,r]=(0,n.useState)(null);return(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"editar-wrapper",children:(0,t.jsxs)("div",{className:"editar-tab-container",children:[!e&&(0,t.jsx)(b,{onResultado:(e,a)=>{s(e),r(a)}}),e&&(0,t.jsx)(f,{servicios:e,onNuevaBusqueda:()=>s(null),onRecargar:async()=>{if(a)try{let e=await (0,d.xb)(a.nombre,a.apellido,a.selectedCity,a.date);s(e)}catch(e){console.error("Error recargando servicios:",e)}}})]})})})},y=()=>{let[e,s]=(0,n.useState)("InfoDisponibilidad");return(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(i,{onNavClick:e=>{s(e)},seccionActiva:e}),(()=>{switch(e){case"resumenGeneral":return(0,t.jsx)(c.default,{});case"infoDisponibilidad":default:return(0,t.jsx)(N,{});case"infoServicios":return(0,t.jsx)(p,{});case"editarTarea":return(0,t.jsx)(w,{})}})()]})}},7904:(e,s,a)=>{Promise.resolve().then(a.bind(a,5746))}},e=>{var s=s=>e(e.s=s);e.O(0,[192,881,874,705,739,441,684,358],()=>s(7904)),_N_E=e.O()}]);