(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{1535:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var s=n(5155),a=n(2115),l=n(6874),i=n.n(l);let r=e=>{let{onNavClick:t,seccionActiva:n}=e;return(0,s.jsxs)("div",{className:"menu-lateral",children:[(0,s.jsxs)(i(),{href:"/menu-principal",className:"btn-53",children:[(0,s.jsx)("div",{className:"original",children:"← Regresar"}),(0,s.jsxs)("div",{className:"letters",children:[(0,s.jsx)("span",{children:"M"}),(0,s.jsx)("span",{children:"E"}),(0,s.jsx)("span",{children:"N"}),(0,s.jsx)("span",{children:"\xda"})]})]}),(0,s.jsx)("div",{className:"menu-buttons",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("infoGeneral"===n?"activo":""),onClick:()=>t("infoGeneral"),children:"ℹ️ Info General"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("listaClientes"===n?"activo":""),onClick:()=>t("listaClientes"),children:"\uD83D\uDC65 Lista de Clientes"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("editarClientes"===n?"activo":""),onClick:()=>t("editarClientes"),children:"✏️ Editar Cliente"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("listaServicios"===n?"activo":""),onClick:()=>t("listaServicios"),children:"\uD83D\uDCCA Lista Servicios"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("configuracion"===n?"activo":""),onClick:()=>t("configuracion"),children:"⚙️ Configuraci\xf3n"})})]})})]})},c=()=>(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("p",{children:"Contenido principal aqu\xed"})});var o=n(4619),d=n(9521);n(1918);var u=n(4426),m=n(6673),h=n(975),p=n(4296),x=n(7976),j=n(6033),v=n(404),g=n(4263),y=n(9776);let b=()=>{let[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0),[i,r]=(0,a.useState)(null),[c,b]=(0,a.useState)(""),[N,f]=(0,a.useState)({}),[C,w]=(0,a.useState)({ciudad:"",tipoId:"",ordenamiento:"nombre"}),{ciudades:S,isLoading:A}=(0,d.k)(),[D,k]=(0,a.useState)(null),[E,I]=(0,a.useState)(null),R=e=>t=>{k(e),I(t.currentTarget)},L=()=>{k(null),I(null)};(0,a.useEffect)(()=>{(async()=>{try{l(!0),r(null);let e=await (0,o.Yu)();t(Array.isArray(e)?e:[])}catch(e){console.error("Error al buscar clientes:",e),r("Error al cargar los clientes"),t([])}finally{l(!1)}})()},[]);let F=(e,t)=>{w(n=>({...n,[e]:t})),L()},M=(0,a.useMemo)(()=>[...new Set(e.map(e=>{var t;return null===(t=e.typeId)||void 0===t?void 0:t.trim()}).filter(e=>e&&""!==e))].sort(),[e]),T=e=>(null!=e?e:"").toString().trim().toLowerCase(),B=(0,a.useMemo)(()=>{let t=e.filter(e=>{var t,n,s,a,l;let i=T(c),r=T("".concat(e.name||""," ").concat(e.surname||"")),o=T(e.email||""),d=T(e.city||""),u=(null!==(s=e.document)&&void 0!==s?s:"").toString(),m=(null!==(a=e.phone)&&void 0!==a?a:"").toString(),h=""===i||r.includes(i)||o.includes(i)||d.includes(i)||u.includes(i)||m.includes(i),p=!C.ciudad||null!==(l=null===(t=e.addresses)||void 0===t?void 0:t.some(e=>T(null==e?void 0:e.city)===T(C.ciudad)))&&void 0!==l&&l,x=!C.tipoId||T(null===(n=e.typeId)||void 0===n?void 0:n.trim())===T(C.tipoId);return h&&p&&x});return t.sort((e,t)=>{switch(C.ordenamiento){case"nombre":{let n=T("".concat(e.name||""," ").concat(e.surname||"")),s=T("".concat(t.name||""," ").concat(t.surname||""));return n.localeCompare(s)}case"documento":return(e.document||0)-(t.document||0);case"email":return T(e.email).localeCompare(T(t.email));case"ciudad":return T(e.city).localeCompare(T(t.city));default:return 0}}),t},[e,c,C]);if(n)return(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(u.A,{})})});if(i)return(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)("div",{className:"no-results",style:{flexDirection:"column",gap:"1rem"},children:[(0,s.jsx)("span",{children:i}),(0,s.jsx)("button",{className:"retry-btn",onClick:()=>location.reload(),children:"Reintentar"})]})})});let O=[];return"Ciudad"===D?O=[(0,s.jsx)(m.A,{onClick:()=>F("ciudad",""),children:"Todas las ciudades"},"all-cities"),...A?[(0,s.jsx)(m.A,{disabled:!0,children:"Cargando ciudades…"},"loading-cities")]:(S||[]).map(e=>(0,s.jsx)(m.A,{onClick:()=>F("ciudad",e),selected:T(C.ciudad)===T(e),children:e},e))]:"Tipo ID"===D?O=[(0,s.jsx)(m.A,{onClick:()=>F("tipoId",""),children:"Todos los tipos"},"all-types"),...M.map(e=>(0,s.jsx)(m.A,{onClick:()=>F("tipoId",e),selected:T(C.tipoId)===T(e),children:e},e))]:"Ordenar"===D&&(O=[["nombre","Por Nombre"],["documento","Por Documento"],["email","Por Email"],["ciudad","Por Ciudad"]].map(e=>{let[t,n]=e;return(0,s.jsx)(m.A,{onClick:()=>F("ordenamiento",t),selected:C.ordenamiento===t,children:n},t)})),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"lista-clientes-content",children:[(0,s.jsxs)("div",{className:"top-bar",children:[(0,s.jsxs)("div",{className:"dropdown",style:{position:"relative",transition:"all .3s ease-in-out"},children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>b(e.target.value),placeholder:"Buscar clientes..."}),c&&(0,s.jsx)("button",{className:"clear-search",onClick:()=>b(""),title:"Limpiar b\xfasqueda",children:"✕"})]}),(0,s.jsx)("div",{className:"filter-buttons",children:["Ciudad","Tipo ID","Ordenar"].map(e=>(0,s.jsxs)("button",{className:"menu-btn-listaclientes ".concat(D===e?"active-filter":""),onClick:R(e),children:[e," ",D===e?"▲":"▼"]},e))}),(0,s.jsx)(h.A,{anchorEl:E,open:!!E,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,children:O})]}),(0,s.jsx)("div",{className:"results-info",children:B.length===e.length?"Mostrando ".concat(e.length," clientes"):"Mostrando ".concat(B.length," de ").concat(e.length," clientes")}),(0,s.jsx)(p.A,{className:"tabla-clientes-container",children:(0,s.jsxs)(x.A,{className:"tabla-clientes",size:"small",stickyHeader:!0,children:[(0,s.jsx)(j.A,{children:(0,s.jsxs)(v.A,{children:[(0,s.jsx)(g.A,{children:"Nombre"}),(0,s.jsx)(g.A,{children:"N\xfamero Contacto"}),(0,s.jsx)(g.A,{children:"ID"}),(0,s.jsx)(g.A,{children:"Documento"}),(0,s.jsx)(g.A,{children:"Email"}),(0,s.jsx)(g.A,{children:"Direcciones"})]})}),(0,s.jsx)(y.A,{children:B.length>0?B.flatMap((e,t)=>{var n,a,l,i,r,c;let o=null!==(c=null!==(l=null==e?void 0:e.document)&&void 0!==l?l:null==e?void 0:e.email)&&void 0!==c?c:"".concat(null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"","-").concat(null!==(r=null==e?void 0:e.phone)&&void 0!==r?r:"","-").concat(t);return[(0,s.jsxs)(v.A,{className:"cliente-row",hover:!0,children:[(0,s.jsxs)(g.A,{children:[e.name," ",e.surname]}),(0,s.jsx)(g.A,{children:e.phone||"—"}),(0,s.jsx)(g.A,{children:(null===(n=e.typeId)||void 0===n?void 0:n.trim())||"—"}),(0,s.jsx)(g.A,{children:e.document||"—"}),(0,s.jsx)(g.A,{children:e.email||"—"}),(0,s.jsx)(g.A,{children:(0,s.jsxs)("button",{className:"direcciones-toggle",onClick:()=>f(t=>({...t,[e.document]:!t[e.document]})),children:[(null===(a=e.addresses)||void 0===a?void 0:a.length)||0," ",N[e.document]?"▲":"▼"]})})]},"row-".concat(o)),N[e.document]&&e.addresses?(0,s.jsx)(v.A,{className:"direcciones-row",children:(0,s.jsx)(g.A,{className:"direcciones-cell",colSpan:6,children:(0,s.jsxs)("div",{className:"direcciones-container",children:[(0,s.jsx)("h4",{children:"Direcciones:"}),(0,s.jsx)("div",{className:"direcciones-grid",children:e.addresses.map(e=>(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:e.description}),(0,s.jsxs)("div",{className:"direccion-datos",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Direcci\xf3n:"})," ",e.address]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Ciudad:"})," ",e.city]})]})]},e.id))})]})})},"dir-".concat(o)):null].filter(Boolean)}):(0,s.jsx)(v.A,{children:(0,s.jsx)(g.A,{colSpan:6,align:"center",style:{color:"#666",padding:"24px 16px"},children:c||C.ciudad||C.tipoId?"No se encontraron clientes que coincidan con los filtros":"No hay clientes para mostrar"})})})]})})]})})},N=e=>{let{value:t,onChange:n,onResultado:l,mensajeError:i}=e,[r,c]=(0,a.useState)(!1),d=async()=>{if(t.trim()){c(!0);try{let e=await (0,o.he)(t);l(e)}catch(e){l(null)}finally{c(!1)}}};return(0,s.jsxs)("div",{className:"busqueda-form-grid",children:[(0,s.jsx)("input",{type:"text",placeholder:"Documento del cliente",value:t,onChange:n,className:"busqueda-full-width"}),(0,s.jsx)("div",{className:"busqueda-form-buttons busqueda-full-width",children:(0,s.jsx)("button",{type:"button",onClick:d,className:"menu-btn",children:r?"Buscando...":"\uD83D\uDD0D BUSCAR"})}),i&&(0,s.jsx)("p",{className:"no-results",children:i})]})},f=e=>{let{cliente:t,onVolver:n}=e,[l,i]=(0,a.useState)(""),[r,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,x]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&(i(t.name||""),c(t.surname||""),u(t.document||""),h(t.email||""),x(t.phone||""))},[t]);let j=async()=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar al cliente ".concat(l," ").concat(r,"?"))){try{await (0,o.Qb)(t.document)}catch(e){alert("Error al eliminar Cliente."),console.error(e)}alert("Cliente eliminado correctamente ✅"),n&&n()}};return(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"elim-nombre",type:"text",value:l,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"elim-apellido",type:"text",value:r,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"elim-documento",type:"text",value:d,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"elim-email",type:"email",value:m,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"elim-phone",type:"text",value:p,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:n,children:"\uD83D\uDD04 NUEVA B\xdaSQUEDA"}),(0,s.jsx)("button",{type:"button",className:"delete-btn",onClick:j,children:"\uD83D\uDDD1️ ELIMINAR"}),(0,s.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>{n&&n()},children:"❌ CANCELAR"})]})]})},C=e=>{let{cliente:t={},onClose:n,onGuardar:l}=e,{ciudades:i,isLoading:r,isError:c}=(0,d.k)(),[o,u]=(0,a.useState)([]),[m,h]=(0,a.useState)({}),p=(0,a.useRef)({});(0,a.useEffect)(()=>{let e=(Array.isArray(t.addresses)?t.addresses:[]).map(e=>({id:e.id,address:e.address||"",city:e.city||"",description:e.description||""}));0===e.length&&e.push({id:"temp-".concat(Date.now()),address:"",city:"",description:""}),u(e)},[t.addresses]),(0,a.useEffect)(()=>{let e=e=>{Object.keys(p.current).forEach(t=>{p.current[t]&&!p.current[t].contains(e.target)&&h(e=>({...e,[t]:!1}))})};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=(e,t,n)=>{u(s=>s.map(s=>s.id===e?{...s,[t]:n}:s))},j=(e,t)=>{u(n=>n.map(n=>n.id===e?{...n,city:t}:n)),h(t=>({...t,[e]:!1}))},v=e=>{h(t=>({...t,[e]:!t[e]}))},g=e=>{o.length>1&&u(t=>t.filter(t=>t.id!==e))};return t?(0,s.jsx)("div",{className:"modal-overlay",style:{overflowY:"auto"},onClick:n,children:(0,s.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:o.map(e=>(0,s.jsx)("div",{style:{marginBottom:"15px"},children:(0,s.jsxs)("div",{className:"modal-asignacion-form-grid",style:{display:"flex",alignItems:"center",gap:"15px",flexWrap:"wrap"},children:[(0,s.jsx)("input",{type:"text",placeholder:"Direcci\xf3n",value:e.address,onChange:t=>x(e.id,"address",t.target.value),style:{flex:"2",minWidth:"250px"}}),(0,s.jsx)("input",{type:"text",placeholder:"Descripci\xf3n",value:e.description,onChange:t=>x(e.id,"description",t.target.value),style:{flex:"1",minWidth:"150px"}}),(0,s.jsxs)("div",{className:"dropdown",ref:t=>p.current[e.id]=t,style:{minWidth:"180px",flex:"0 0 auto",position:"relative"},children:[(0,s.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(m[e.id]?"open":""),onClick:()=>v(e.id),style:{width:"100%"},children:[(0,s.jsx)("span",{children:e.city||"Seleccionar ciudad"}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),m[e.id]&&(0,s.jsxs)("div",{className:"dropdown-content",style:{position:"absolute",top:"100%",left:"0",right:"0",zIndex:9999,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:[r&&(0,s.jsx)("div",{children:"Cargando ciudades..."}),c&&(0,s.jsx)("div",{children:"Error al cargar ciudades"}),!r&&!c&&i.map((t,n)=>(0,s.jsx)("button",{type:"button",onClick:()=>j(e.id,t),style:{display:"block",width:"100%",padding:"8px 12px",textAlign:"left",border:"none",backgroundColor:"transparent",cursor:"pointer",borderBottom:n<i.length-1?"1px solid #eee":"none"},onMouseEnter:e=>e.target.style.backgroundColor="#f5f5f5",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:t},"".concat(e.id,"-").concat(t)))]})]}),(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:()=>g(e.id),style:{borderRadius:"50%",width:"40px",height:"40px",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",flex:"0 0 auto"},children:"\xd7"})]})},e.id))})}),(0,s.jsxs)("div",{className:"modal-asignacion-form-buttons",children:[(0,s.jsx)("button",{className:"menu-btn",onClick:()=>{let e="temp-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()));u(t=>[...t,{id:e,address:"",city:"",description:""}])},children:"+ Agregar Direcci\xf3n"}),(0,s.jsx)("button",{className:"menu-btn",onClick:()=>{let e=o.filter(e=>""!==e.address.trim()).map(e=>{if("string"==typeof e.id&&e.id.startsWith("temp")){let{id:t,...n}=e;return n}return e});l&&l(e),n()},children:"Guardar Cambios"}),(0,s.jsx)("button",{className:"cancel-btn",onClick:n,children:"Cancelar"})]})]})}):null},w=()=>{let[e,t]=(0,a.useState)(""),[n,l]=(0,a.useState)(""),[i,r]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[x,j]=(0,a.useState)(""),[v,g]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),[N,f]=(0,a.useState)(!1),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let S=async()=>{if(!e||!i||!c||!h||(v.length,0)){alert("Por favor completa todos los campos obligatorios.");return}try{await (0,o._U)({name:e,surname:n,document:i,email:c,phone:u,typeId:h,addresses:v,comments:x}),alert("Cliente agregado exitosamente."),A()}catch(e){alert("Error al agregar cliente."),console.error(e)}},A=()=>{t(""),l(""),r(""),d(""),m(""),p(""),j(""),g([])};return(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"empleados-full-width empleados-form-grid",style:{maxHeight:"45vh",overflowY:"auto",paddingRight:"8px"},children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"nombre",type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"apellido",type:"text",value:n,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"tipoDocumento",children:"Tipo ID"}),(0,s.jsxs)("div",{className:"dropdown",ref:w,children:[(0,s.jsxs)("button",{id:"tipoDocumento",type:"button",className:"dropdown-trigger ".concat(N?"open":""),onClick:()=>f(e=>!e),children:[(0,s.jsx)("span",{children:h||"Seleccionar Tipo ID"}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),N&&(0,s.jsx)("div",{className:"dropdown-content",children:["CC","TI","NIT","CE","PA"].map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>{p(e),f(!1)},children:e},t))})]})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"documento",type:"text",value:i,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("button",{type:"button",className:"menu-btn",onClick:()=>b(!0),children:["\uD83D\uDCCD Editar Direcciones (",v.length,")"]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"phone",type:"text",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Comentarios"}),(0,s.jsx)("textarea",{className:"modal-asignacion-textarea",value:x,onChange:e=>j(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:S,children:"➕ AGREGAR"}),(0,s.jsx)("button",{type:"reset",className:"cancel-btn",onClick:()=>{(e||n||i||c||u||h)&&window.confirm("\xbfDeseas borrar todos los campos?")&&A()},children:"❌ CANCELAR"})]}),y&&(0,s.jsx)(C,{cliente:{addresses:v},onClose:()=>b(!1),onGuardar:e=>{g(e)}})]})};n(8128);let S=()=>{let[e,t]=(0,a.useState)("edit"),[n,l]=(0,a.useState)(""),[i,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[x,j]=(0,a.useState)(""),[v,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[S,A]=(0,a.useState)(""),[D,k]=(0,a.useState)([]),[E,I]=(0,a.useState)(""),[R,L]=(0,a.useState)(""),[F,M]=(0,a.useState)(!1),[T,B]=(0,a.useState)(!1),[O,z]=(0,a.useState)(!1),[q,G]=(0,a.useState)(!1),[H,U]=(0,a.useState)(!1),P=(0,a.useRef)(null),Y=(0,a.useRef)(null),_=["CC","TI","NIT","CE","PA"];(0,a.useEffect)(()=>{i&&(d(i.typeId||""),m(i.name||""),p(i.surname||""),j(i.document||""),g(i.email||""),b(i.phone||""),A(i.comments||""),k(i.addresses||[]),I(i.city||""))},[i]),(0,a.useEffect)(()=>{let e=e=>{P.current&&!P.current.contains(e.target)&&G(!1),Y.current&&!Y.current.contains(e.target)&&U(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let V=t=>{t?(r(t),"edit"===e?M(!0):"delete"===e&&B(!0),L("")):(r(null),M(!1),B(!1),L("Cliente no encontrado."))},W=async()=>{if(i)try{await (0,o.R1)(i.document,{typeId:c,name:u,surname:h,email:v,phone:y,addresses:D,city:E,document:x,comments:S}),alert("Cliente actualizado correctamente ✅")}catch(e){alert("Error al actualizar cliente ❌"+e)}},J=()=>{l(""),r(null),M(!1),B(!1),L("")};return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"empleados-wrapper",children:(0,s.jsxs)("div",{className:"empleados-tab-container",children:[(0,s.jsxs)("div",{className:"empleados-tabs",children:[(0,s.jsx)("button",{className:"empleados-tab ".concat("edit"===e?"active":""),onClick:()=>{t("edit"),J()},children:"✏️ Editar"}),(0,s.jsx)("button",{className:"empleados-tab ".concat("add"===e?"active":""),onClick:()=>{t("add"),J()},children:"➕ Agregar"}),(0,s.jsx)("button",{className:"empleados-tab ".concat("delete"===e?"active":""),onClick:()=>{t("delete"),J()},children:"\uD83D\uDDD1️ Eliminar"})]}),(0,s.jsx)("div",{className:"empleados-content-area",children:"edit"===e?F?(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"empleados-full-width empleados-form-grid",style:{maxHeight:"45vh",overflowY:"auto",paddingRight:"8px"},children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"nombre",type:"text",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"apellido",type:"text",value:h,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"tipoDocumento",children:"Tipo ID"}),(0,s.jsxs)("div",{className:"dropdown",ref:P,children:[(0,s.jsxs)("button",{id:"tipoDocumento",type:"button",className:"dropdown-trigger ".concat(q?"open":""),onClick:()=>G(e=>!e),children:[(0,s.jsx)("span",{children:c||"Seleccionar Tipo ID"}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),q&&(0,s.jsx)("div",{className:"dropdown-content",children:_.map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>{d(e),G(!1)},children:e},t))})]})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"documento",type:"text",value:x,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"email",type:"email",value:v,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("button",{type:"button",className:"menu-btn",onClick:()=>z(!0),children:["\uD83D\uDCCD Editar Direcciones (",D.length,")"]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"phone",type:"text",value:y,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Comentarios"}),(0,s.jsx)("textarea",{className:"modal-asignacion-textarea",value:S,onChange:e=>A(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:J,children:"\uD83D\uDD04 NUEVA B\xdaSQUEDA"}),(0,s.jsx)("button",{type:"submit",className:"menu-btn",onClick:W,children:"\uD83D\uDCBE GUARDAR CAMBIOS"}),(0,s.jsx)("button",{type:"reset",className:"cancel-btn",onClick:J,children:"❌ CANCELAR"})]})]}):(0,s.jsx)(N,{value:n,onChange:e=>l(e.target.value),onResultado:V,mensajeError:R}):"add"===e?(0,s.jsx)(w,{}):"delete"===e?T?(0,s.jsx)(f,{cliente:i,onVolver:J}):(0,s.jsx)(N,{value:n,onChange:e=>l(e.target.value),onResultado:V,mensajeError:R}):null})]})}),O&&(0,s.jsx)(C,{cliente:i,onClose:()=>z(!1),onGuardar:e=>{k(e),r(t=>({...t,addresses:e}))}})]})};var A=n(5695),D=n(8927),k=n(8407);let E=()=>{let[e,t]=(0,a.useState)(new Date().getMonth()),[n,l]=(0,a.useState)(new Date().getFullYear()),[i,r]=(0,a.useState)(""),[c,d]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[b,N]=(0,a.useState)(null),[f,C]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),R=(0,a.useRef)(null),L=(0,a.useRef)(null),F=(0,a.useRef)(null),[M,T]=(0,a.useState)(!1),[B,O]=(0,a.useState)([]),[z,q]=(0,a.useState)({}),G=(0,A.useSearchParams)(),H=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],U=new Date().getFullYear(),P=Array.from({length:11},(e,t)=>U-5+t),Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().toLowerCase().replace(/[\s_]/g,"")},_=(e,t)=>{if(!e)return;let n=new Map(Object.keys(e).map(e=>[Y(e),e]));for(let s of t){let t=n.get(Y(s));if(void 0!==t){let n=e[t];if(null!=n&&""!==String(n).trim())return n}}},V=e=>{let t=e||"";try{let[e,n,s]=String(t).split("-");if(e&&n&&s)return"".concat(s,"/").concat(n,"/").concat(e);return String(t)}catch(e){return String(t)}},W=e=>{var t,n;if(!e)return"—";if("string"==typeof e)return e.slice(0,5);let s=String(null!==(t=null==e?void 0:e.hour)&&void 0!==t?t:"").padStart(2,"0"),a=String(null!==(n=null==e?void 0:e.minute)&&void 0!==n?n:"").padStart(2,"0");return"".concat(s,":").concat(a)},J=e=>{var t,n;return null!==(n=_(e,["serviceDescription","description","name","serviceName","type"]))&&void 0!==n?n:"#".concat(null!==(t=_(e,["idService","id"]))&&void 0!==t?t:"").trim()},Q=e=>{var t;let n=_(e,["employeeCompleteName","fullName"]);if(n)return n;let s=_(e,["employeeName","name","firstName"]),a=_(e,["employeeSurname","surname","lastName"]),l="".concat(null!=s?s:""," ").concat(null!=a?a:"").trim();return l||(null!==(t=_(e,["employeeDocument","document","id"]))&&void 0!==t?t:"—")};(0,a.useEffect)(()=>{(async()=>{try{let n=await (0,o.Yu)(),s=Array.isArray(n)?n:[];d(s),h(s);let a=G.get("doc");if(a){let n=s.find(e=>String(e.document)===String(a));if(n){var e,t;N(n),r(G.get("name")||"".concat(null!==(e=n.name)&&void 0!==e?e:""," ").concat(null!==(t=n.surname)&&void 0!==t?t:"").trim())}}}catch(e){d([]),h([])}})()},[]),(0,a.useEffect)(()=>{let e=e=>{R.current&&!R.current.contains(e.target)&&C(!1),L.current&&!L.current.contains(e.target)&&S(!1),F.current&&!F.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let K=e=>(null!=e?e:"").toString().trim().toLowerCase(),X=e=>{r(e),I(!0);let t=K(e);if(!t){h(c);return}h(c.filter(e=>{var n,s,a,l;let i="".concat(null!==(n=e.name)&&void 0!==n?n:""," ").concat(null!==(s=e.surname)&&void 0!==s?s:"").toLowerCase(),r=(null!==(a=e.document)&&void 0!==a?a:"").toString().toLowerCase(),c=(null!==(l=e.email)&&void 0!==l?l:"").toLowerCase();return i.includes(t)||r.includes(t)||c.includes(t)}))},Z=e=>{var t,n;N(e),r("".concat(null!==(t=e.name)&&void 0!==t?t:""," ").concat(null!==(n=e.surname)&&void 0!==n?n:"").trim()),I(!1)},$=(e,n)=>{t(n),C(!1)},ee=e=>{l(e),S(!1)},et=!!b&&Number.isInteger(e)&&!!n,en=async()=>{if(et){T(!0),q({}),O([]);try{let t=await (0,o.MY)(b.document,n,e+1);O(Array.isArray(t)?t:[])}catch(e){O([])}finally{T(!1)}}};return(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"lista-clientes-content",children:[(0,s.jsxs)("div",{className:"top-bar",children:[(0,s.jsxs)("div",{className:"dropdown",ref:F,children:[(0,s.jsx)("input",{type:"text",placeholder:"Seleccionar cliente",value:i,onChange:e=>X(e.target.value),onFocus:()=>{I(!0),h(c)},onKeyDown:e=>{"Enter"===e.key&&et&&en()}}),E&&m.length>0&&(0,s.jsx)("div",{className:"dropdown-content",children:m.map(e=>(0,s.jsxs)("button",{type:"button",className:(null==b?void 0:b.document)===e.document?"selected":"",onClick:()=>Z(e),title:e.email||"",children:[e.name," ",e.surname," • ",e.document]},e.document))})]}),(0,s.jsxs)("div",{className:"filter-buttons",children:[(0,s.jsxs)("div",{className:"dropdown",ref:R,children:[(0,s.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(f?"open":""),onClick:()=>C(!f),children:[(0,s.jsx)("span",{children:H[e]}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),f&&(0,s.jsx)("div",{className:"dropdown-content",children:H.map((t,n)=>(0,s.jsx)("button",{type:"button",className:e===n?"selected":"",onClick:()=>$(t,n),children:t},n))})]}),(0,s.jsxs)("div",{className:"dropdown",ref:L,children:[(0,s.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(w?"open":""),onClick:()=>S(!w),children:[(0,s.jsx)("span",{children:n}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),w&&(0,s.jsx)("div",{className:"dropdown-content",children:P.map(e=>(0,s.jsx)("button",{type:"button",className:n===e?"selected":"",onClick:()=>ee(e),children:e},e))})]}),(0,s.jsx)(D.A,{variant:"contained",onClick:en,disabled:!et||M,children:M?"Buscando…":"Buscar"})]})]}),(0,s.jsx)(p.A,{component:k.A,className:"tabla-clientes-container",children:(0,s.jsxs)(x.A,{className:"tabla-clientes",size:"small",stickyHeader:!0,children:[(0,s.jsx)(j.A,{children:(0,s.jsxs)(v.A,{children:[(0,s.jsx)(g.A,{children:"Fecha"}),(0,s.jsx)(g.A,{children:"Hora"}),(0,s.jsx)(g.A,{children:"Horas"}),(0,s.jsx)(g.A,{children:"Estado"}),(0,s.jsx)(g.A,{children:"Ciudad"}),(0,s.jsx)(g.A,{children:"Direcci\xf3n"}),(0,s.jsx)(g.A,{children:"Detalles"})]})}),(0,s.jsx)(y.A,{children:M?(0,s.jsx)(v.A,{children:(0,s.jsx)(g.A,{colSpan:7,align:"center",children:(0,s.jsx)("div",{className:"no-results",children:(0,s.jsx)(u.A,{size:24,sx:{borderBottom:"none"}})})})}):0===B.length?(0,s.jsx)(v.A,{children:(0,s.jsx)(g.A,{colSpan:7,align:"center",sx:{borderBottom:"none"},children:et?"Sin datos para los filtros seleccionados":"Selecciona filtros y presiona Buscar"})}):B.flatMap((e,t)=>{var n,a,l,i,r,c;let o=null!==(n=null==e?void 0:e.id)&&void 0!==n?n:t,d=V(_(e,["serviceDate"])),u=W(_(e,["startHour"])),m=W(_(e,["endHour"])),h=null!==(a=_(e,["totalServiceHours","totalServiceH ours"]))&&void 0!==a?a:0,p=null!==(l=_(e,["state"]))&&void 0!==l?l:"—",x=null!==(i=_(e,["city"]))&&void 0!==i?i:"—",j=null!==(r=_(e,["addressService"]))&&void 0!==r?r:"—",y=Array.isArray(_(e,["services"]))?_(e,["services"]):[],b=Array.isArray(_(e,["employees"]))?_(e,["employees"]):[],N=null!==(c=_(e,["recurrenceType"]))&&void 0!==c?c:"—",f=_(e,["comments"])||"—";return[(0,s.jsxs)(v.A,{className:"cliente-row",hover:!0,children:[(0,s.jsx)(g.A,{children:d}),(0,s.jsxs)(g.A,{children:[u," - ",m]}),(0,s.jsx)(g.A,{children:Number(h).toFixed(2)}),(0,s.jsx)(g.A,{children:p}),(0,s.jsx)(g.A,{children:x}),(0,s.jsx)(g.A,{children:j}),(0,s.jsx)(g.A,{children:(0,s.jsxs)("button",{className:"direcciones-toggle",onClick:()=>q(e=>({...e,[o]:!e[o]})),children:["".concat(b.length," emp • ").concat(y.length," serv")," ",z[o]?"▲":"▼"]})})]},"row-".concat(o)),z[o]?(0,s.jsx)(v.A,{className:"direcciones-row",children:(0,s.jsx)(g.A,{className:"direcciones-cell",colSpan:7,children:(0,s.jsx)("div",{className:"direcciones-container",children:(0,s.jsxs)("div",{className:"direcciones-grid",children:[(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:(0,s.jsx)("strong",{children:"Empleados"})}),(0,s.jsx)("div",{className:"direccion-datos",children:b.length?(0,s.jsx)("ul",{children:b.map((e,t)=>(0,s.jsx)("li",{children:Q(e)},t))}):"—"})]}),(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:(0,s.jsx)("strong",{children:"Servicios"})}),(0,s.jsx)("div",{className:"direccion-datos",children:y.length?(0,s.jsx)("ul",{children:y.map((e,t)=>(0,s.jsx)("li",{children:J(e)},t))}):"—"})]}),(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:(0,s.jsx)("strong",{children:"Recurrencia"})}),(0,s.jsx)("div",{className:"direccion-datos",children:N})]}),(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:(0,s.jsx)("strong",{children:"Comentarios"})}),(0,s.jsx)("div",{className:"direccion-datos",children:f})]})]})})})},"det-".concat(o)):null].filter(Boolean)})})]})})]})})},I=()=>{let[e,t]=(0,a.useState)("infoGeneral");return(0,s.jsxs)("div",{className:"layout",children:[(0,s.jsx)(r,{onNavClick:e=>{t(e)},seccionActiva:e}),(()=>{switch(e){case"infoGeneral":return(0,s.jsx)(c,{});case"listaClientes":default:return(0,s.jsx)(b,{});case"editarClientes":return(0,s.jsx)(S,{});case"listaServicios":return(0,s.jsx)(E,{})}})()]})}},1918:()=>{},4619:(e,t,n)=>{"use strict";n.d(t,{AX:()=>r,El:()=>y,GZ:()=>l,JV:()=>N,Jq:()=>a,MY:()=>c,Qb:()=>v,R1:()=>j,Ue:()=>f,VU:()=>g,Yu:()=>h,_U:()=>p,bM:()=>C,co:()=>o,fS:()=>u,g_:()=>w,he:()=>x,qP:()=>m,u7:()=>i,xb:()=>d,z2:()=>b});let s=n(3464).A.create({baseURL:"https://cleaniron-cffqbcg5b9ede6fm.eastus2-01.azurewebsites.net",headers:{"Content-Type":"application/json"}}),a=async()=>{let{data:e}=await s.get("/service/all");return e},l=async e=>{let{data:t}=await s.post("/schedule",e);return t},i=async(e,t,n)=>{let{data:a}=await s.get("/schedule/servicesCity/".concat(e),{params:{year:t,month:n}});return a},r=async(e,t,n)=>{let{data:a}=await s.get("/schedule/servicesEmployee/".concat(e),{params:{year:t,month:n}});return a},c=async(e,t,n)=>{let{data:a}=await s.get("/schedule/servicesClient/".concat(e),{params:{year:t,month:n}});return a},o=async e=>{let{data:t}=await s.get("/schedule/".concat(e));return t},d=async(e,t,n,a)=>{let l={};n&&(l.city=n),e&&(l.name=e),t&&(l.surname=t);let i=Object.keys(l).length?{params:l}:{},{data:r}=await s.get("/schedule/".concat(a,"/filter"),i);return r},u=async(e,t)=>{let{data:n}=await s.patch("/schedule/".concat(e),t);return n},m=async e=>{await s.delete("/schedule/".concat(e))},h=async()=>{let{data:e}=await s.get("/client");return e},p=async e=>{let{data:t}=await s.post("/client",e);return t},x=async e=>{let{data:t}=await s.get("/client/".concat(e));return t},j=async(e,t)=>{await s.put("/client/".concat(e),t)},v=async e=>{await s.delete("/client/".concat(e))},g=async()=>{let{data:e}=await s.get("/employee");return e},y=async e=>{let{data:t}=await s.get("/employee/".concat(e));return t},b=async e=>{let{data:t}=await s.post("/employee",e);return t},N=async e=>{let{data:t}=await s.get("/employee/city/".concat(encodeURIComponent(e)));return t},f=async(e,t)=>{let{data:n}=await s.patch("/employee/update/".concat(e),t);return n},C=async e=>{await s.delete("/employee/delete/".concat(e))},w=async(e,t,n,a)=>{let{data:l}=await s.get("/employee/available",{params:{date:e,startHour:t,endHour:n,city:a}});return l}},8128:()=>{},9521:(e,t,n)=>{"use strict";n.d(t,{k:()=>i,p:()=>r});var s=n(838),a=n(2115);let l=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Error al cargar ciudades");return e.json()});function i(){let e="https://cleaniron-cffqbcg5b9ede6fm.eastus2-01.azurewebsites.net",{data:t,error:n}=(0,s.Ay)(e?"".concat(e,"/address/cities"):null,l);return{ciudades:t||[],isLoading:!n&&!t,isError:!!n}}function r(){let{startHour:e=0,endHour:t=24,stepMinutes:n=30}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMemo)(()=>{let s=[];for(let a=e;a<t;a++)for(let e=0;e<60;e+=n){let t="".concat(String(a).padStart(2,"0"),":").concat(String(e).padStart(2,"0"),":00"),n=new Date;n.setHours(a,e);let l=n.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});s.push({value:t,label:l})}return s},[e,t,n])}},9794:(e,t,n)=>{Promise.resolve().then(n.bind(n,1535))}},e=>{var t=t=>e(e.s=t);e.O(0,[884,169,874,705,608,277,441,684,358],()=>t(9794)),_N_E=e.O()}]);