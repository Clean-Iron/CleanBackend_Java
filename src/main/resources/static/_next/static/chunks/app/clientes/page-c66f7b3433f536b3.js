(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{1918:()=>{},2467:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var s=n(5155),a=n(2115),l=n(6874),i=n.n(l);let r=e=>{let{onNavClick:t,seccionActiva:n}=e;return(0,s.jsxs)("div",{className:"menu-lateral",children:[(0,s.jsxs)(i(),{href:"/menu-principal",className:"btn-53",children:[(0,s.jsx)("div",{className:"original",children:"← Regresar"}),(0,s.jsxs)("div",{className:"letters",children:[(0,s.jsx)("span",{children:"M"}),(0,s.jsx)("span",{children:"E"}),(0,s.jsx)("span",{children:"N"}),(0,s.jsx)("span",{children:"\xda"})]})]}),(0,s.jsx)("div",{className:"menu-buttons",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("infoGeneral"===n?"activo":""),onClick:()=>t("infoGeneral"),children:"ℹ️ Informaci\xf3n General"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("listaClientes"===n?"activo":""),onClick:()=>t("listaClientes"),children:"\uD83D\uDC65 Lista de Clientes"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("editarClientes"===n?"activo":""),onClick:()=>t("editarClientes"),children:"✏️ Editar Cliente"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("reportes"===n?"activo":""),onClick:()=>t("reportes"),children:"\uD83D\uDCCA Reportes"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"menu-btn ".concat("configuracion"===n?"activo":""),onClick:()=>t("configuracion"),children:"⚙️ Configuraci\xf3n"})})]})})]})},c=()=>(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("p",{children:"Contenido principal aqu\xed"})});var o=n(4619);n(1918);let d=()=>{let[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0),[i,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[x,j]=(0,a.useState)({}),[b,v]=(0,a.useState)({ciudad:"",tipoId:"",ordenamiento:"nombre"});(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{l(!0),r(null);let e=await (0,o.Yu)();t(Array.isArray(e)?e:[])}catch(e){console.error("Error al buscar clientes:",e),r("Error al cargar los clientes"),t([])}finally{l(!1)}},y=(e,t)=>{v(n=>({...n,[e]:t})),m(null)},N=(0,a.useMemo)(()=>({ciudades:e.map(e=>e.city).filter(e=>e&&""!==e.trim()).filter((e,t,n)=>n.indexOf(e)===t).sort(),tiposId:e.map(e=>{var t;return null===(t=e.typeId)||void 0===t?void 0:t.trim()}).filter(e=>e&&""!==e).filter((e,t,n)=>n.indexOf(e)===t).sort()}),[e]),C=(0,a.useMemo)(()=>{let t=e.filter(e=>{var t;let n=h.toLowerCase().trim(),s="".concat(e.name||""," ").concat(e.surname||"").toLowerCase(),a=(e.email||"").toLowerCase(),l=(e.city||"").toLowerCase(),i=(e.document||"").toString(),r=(e.phone||"").toString(),c=""===n||s.includes(n)||a.includes(n)||l.includes(n)||i.includes(n)||r.includes(n),o=!b.ciudad||e.city===b.ciudad,d=!b.tipoId||(null===(t=e.typeId)||void 0===t?void 0:t.trim())===b.tipoId;return c&&o&&d});return t.sort((e,t)=>{switch(b.ordenamiento){case"nombre":let n="".concat(e.name||""," ").concat(e.surname||"").toLowerCase(),s="".concat(t.name||""," ").concat(t.surname||"").toLowerCase();return n.localeCompare(s);case"documento":return(e.document||0)-(t.document||0);case"email":return(e.email||"").localeCompare(t.email||"");case"ciudad":return(e.city||"").localeCompare(t.city||"");default:return 0}}),t},[e,h,b]),f=()=>{d(!c),m(null)},w=e=>{m(u===e?null:e)},D=e=>{j(t=>({...t,[e]:!t[e]}))},S=e=>{switch(e){case"Ciudad":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>y("ciudad",""),children:"Todas las ciudades"}),N.ciudades.map(e=>(0,s.jsx)("button",{onClick:()=>y("ciudad",e),className:b.ciudad===e?"selected":"",children:e},e))]});case"Tipo ID":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>y("tipoId",""),children:"Todos los tipos"}),N.tiposId.map(e=>(0,s.jsx)("button",{onClick:()=>y("tipoId",e),className:b.tipoId===e?"selected":"",children:e},e))]});case"Ordenar":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>y("ordenamiento","nombre"),className:"nombre"===b.ordenamiento?"selected":"",children:"Por Nombre"}),(0,s.jsx)("button",{onClick:()=>y("ordenamiento","documento"),className:"documento"===b.ordenamiento?"selected":"",children:"Por Documento"}),(0,s.jsx)("button",{onClick:()=>y("ordenamiento","email"),className:"email"===b.ordenamiento?"selected":"",children:"Por Email"}),(0,s.jsx)("button",{onClick:()=>y("ordenamiento","ciudad"),className:"ciudad"===b.ordenamiento?"selected":"",children:"Por Ciudad"})]});default:return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{children:"Opci\xf3n 1"}),(0,s.jsx)("button",{children:"Opci\xf3n 2"}),(0,s.jsx)("button",{children:"Opci\xf3n 3"})]})}};return n?(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"lista-clientes-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)("div",{className:"no-results",children:"Cargando Clientes..."})})}):i?(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"lista-clientes-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)("div",{className:"no-results",style:{flexDirection:"column",gap:"1rem"},children:[(0,s.jsx)("span",{children:i}),(0,s.jsx)("button",{onClick:g,className:"retry-btn",children:"Reintentar"})]})})}):(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"lista-clientes-content",children:[(0,s.jsxs)("div",{className:"top-bar",children:[(0,s.jsxs)("div",{className:"container-input",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>{p(e.target.value)},placeholder:"Buscar clientes por nombre, email, ciudad, documento...",className:"input"}),(0,s.jsx)("svg",{className:"search-icon",fill:"#000000",width:"20px",height:"20px",viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M790.588 1468.235c-373.722 0-677.647-303.924-677.647-677.647 0-373.722 303.925-677.647 677.647-677.647 373.723 0 677.647 303.925 677.647 677.647 0 373.723-303.924 677.647-677.647 677.647Zm596.781-160.715c120.396-138.692 193.807-319.285 193.807-516.932C1581.176 354.748 1226.428 0 790.588 0S0 354.748 0 790.588s354.748 790.588 790.588 790.588c197.647 0 378.24-73.411 516.932-193.807l516.028 516.142 79.963-79.963-516.142-516.028Z",fillRule:"evenodd"})}),h&&(0,s.jsx)("button",{className:"clear-search",onClick:()=>{p("")},title:"Limpiar b\xfasqueda",children:"✕"})]}),!c&&(0,s.jsxs)("button",{className:"menu-btn-listaclientes filter-btn",onClick:f,children:[(0,s.jsx)("span",{className:"filter-icon",children:"\uD83D\uDD0D"})," Filtrar"]}),c&&(0,s.jsxs)("div",{className:"filter-buttons",children:[["Ciudad","Tipo ID","Ordenar"].map(e=>(0,s.jsxs)("div",{className:"dropdown",children:[(0,s.jsxs)("button",{className:"menu-btn-listaclientes ".concat(u===e?"active-filter":""),onClick:()=>w(e),children:[e," ",u===e?"▲":"▼"]}),u===e&&(0,s.jsx)("div",{className:"dropdown-content",children:S(e)})]},e)),(0,s.jsx)("button",{className:"close-btn",onClick:f,children:"✖"})]})]}),(0,s.jsx)("div",{className:"results-info",children:C.length===e.length?"Mostrando ".concat(e.length," clientes"):"Mostrando ".concat(C.length," de ").concat(e.length," clientes")}),(0,s.jsx)("div",{className:"tabla-clientes-container",children:C.length>0?(0,s.jsxs)("table",{className:"tabla-clientes",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Nombre"}),(0,s.jsx)("th",{children:"Numero Contacto"}),(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Documento"}),(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"Direcciones"})]})}),(0,s.jsx)("tbody",{children:C.map(e=>{var t,n;return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)("tr",{className:"cliente-row",children:[(0,s.jsxs)("td",{children:[e.name," ",e.surname]}),(0,s.jsx)("td",{children:e.phone||"—"}),(0,s.jsx)("td",{children:(null===(t=e.typeId)||void 0===t?void 0:t.trim())||"—"}),(0,s.jsx)("td",{children:e.document||"—"}),(0,s.jsx)("td",{children:e.email||"—"}),(0,s.jsx)("td",{children:(0,s.jsxs)("button",{className:"direcciones-toggle",onClick:()=>D(e.document),children:[(null===(n=e.addresses)||void 0===n?void 0:n.length)||0," ",x[e.document]?"▲":"▼"]})})]}),x[e.document]&&e.addresses&&(0,s.jsx)("tr",{className:"direcciones-row",children:(0,s.jsx)("td",{colSpan:"6",children:(0,s.jsxs)("div",{className:"direcciones-container",children:[(0,s.jsx)("h4",{children:"Direcciones:"}),(0,s.jsx)("div",{className:"direcciones-grid",children:e.addresses.map(e=>(0,s.jsxs)("div",{className:"direccion-card",children:[(0,s.jsx)("div",{className:"direccion-tipo",children:e.description}),(0,s.jsxs)("div",{className:"direccion-datos",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Direcci\xf3n:"})," ",e.address]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Ciudad:"})," ",e.city]})]})]},e.id))})]})})})]},e.document)})})]}):(0,s.jsx)("div",{className:"no-results",children:h||b.ciudad||b.tipoId?"No se encontraron clientes que coincidan con los filtros":"No hay clientes para mostrar"})})]})})},u=e=>{let{value:t,onChange:n,onResultado:l,mensajeError:i}=e,[r,c]=(0,a.useState)(!1),d=async()=>{if(t.trim()){c(!0);try{let e=await (0,o.he)(t);l(e)}catch(e){l(null)}finally{c(!1)}}};return(0,s.jsxs)("div",{className:"busqueda-form-grid",children:[(0,s.jsx)("input",{type:"text",placeholder:"Documento del cliente",value:t,onChange:n,className:"busqueda-full-width"}),(0,s.jsx)("div",{className:"busqueda-form-buttons busqueda-full-width",children:(0,s.jsx)("button",{type:"button",onClick:d,className:"menu-btn",children:r?"Buscando...":"\uD83D\uDD0D BUSCAR"})}),i&&(0,s.jsx)("p",{className:"no-results",children:i})]})},m=e=>{let{cliente:t,onVolver:n}=e,[l,i]=(0,a.useState)(""),[r,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,x]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&(i(t.name||""),c(t.surname||""),u(t.document||""),h(t.email||""),x(t.phone||""))},[t]);let j=async()=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar al cliente ".concat(l," ").concat(r,"?"))){try{await (0,o.Qb)(t.document)}catch(e){alert("Error al eliminar Cliente."),console.error(e)}alert("Cliente eliminado correctamente ✅"),n&&n()}};return(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"elim-nombre",type:"text",value:l,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"elim-apellido",type:"text",value:r,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"elim-documento",type:"text",value:d,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"elim-email",type:"email",value:m,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"elim-phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"elim-phone",type:"text",value:p,readOnly:!0,className:"empleados-readonly"})]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:n,children:"\uD83D\uDD04 NUEVA B\xdaSQUEDA"}),(0,s.jsx)("button",{type:"button",className:"delete-btn",onClick:j,children:"\uD83D\uDDD1️ ELIMINAR"}),(0,s.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>{n&&n()},children:"❌ CANCELAR"})]})]})};var h=n(9521);let p=e=>{let{cliente:t={},onClose:n,onGuardar:l}=e,{ciudades:i,isLoading:r,isError:c}=(0,h.k)(),[o,d]=(0,a.useState)([]),[u,m]=(0,a.useState)({}),p=(0,a.useRef)({});(0,a.useEffect)(()=>{let e=(Array.isArray(t.addresses)?t.addresses:[]).map(e=>({id:e.id,address:e.address||"",city:e.city||"",description:e.description||""}));0===e.length&&e.push({id:"temp-".concat(Date.now()),address:"",city:"",description:""}),d(e)},[t.addresses]),(0,a.useEffect)(()=>{let e=e=>{Object.keys(p.current).forEach(t=>{p.current[t]&&!p.current[t].contains(e.target)&&m(e=>({...e,[t]:!1}))})};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=(e,t,n)=>{d(s=>s.map(s=>s.id===e?{...s,[t]:n}:s))},j=(e,t)=>{d(n=>n.map(n=>n.id===e?{...n,city:t}:n)),m(t=>({...t,[e]:!1}))},b=e=>{m(t=>({...t,[e]:!t[e]}))},v=e=>{o.length>1&&d(t=>t.filter(t=>t.id!==e))};return t?(0,s.jsx)("div",{className:"modal-overlay",style:{overflowY:"auto"},onClick:n,children:(0,s.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:o.map(e=>(0,s.jsx)("div",{style:{marginBottom:"15px"},children:(0,s.jsxs)("div",{className:"modal-asignacion-form-grid",style:{display:"flex",alignItems:"center",gap:"15px",flexWrap:"wrap"},children:[(0,s.jsx)("input",{type:"text",placeholder:"Direcci\xf3n",value:e.address,onChange:t=>x(e.id,"address",t.target.value),style:{flex:"2",minWidth:"250px"}}),(0,s.jsx)("input",{type:"text",placeholder:"Descripci\xf3n",value:e.description,onChange:t=>x(e.id,"description",t.target.value),style:{flex:"1",minWidth:"150px"}}),(0,s.jsxs)("div",{className:"dropdown",ref:t=>p.current[e.id]=t,style:{minWidth:"180px",flex:"0 0 auto",position:"relative"},children:[(0,s.jsxs)("button",{type:"button",className:"dropdown-trigger ".concat(u[e.id]?"open":""),onClick:()=>b(e.id),style:{width:"100%"},children:[(0,s.jsx)("span",{children:e.city||"Seleccionar ciudad"}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),u[e.id]&&(0,s.jsxs)("div",{className:"dropdown-content",style:{position:"absolute",top:"100%",left:"0",right:"0",zIndex:9999,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:[r&&(0,s.jsx)("div",{children:"Cargando ciudades..."}),c&&(0,s.jsx)("div",{children:"Error al cargar ciudades"}),!r&&!c&&i.map((t,n)=>(0,s.jsx)("button",{type:"button",onClick:()=>j(e.id,t),style:{display:"block",width:"100%",padding:"8px 12px",textAlign:"left",border:"none",backgroundColor:"transparent",cursor:"pointer",borderBottom:n<i.length-1?"1px solid #eee":"none"},onMouseEnter:e=>e.target.style.backgroundColor="#f5f5f5",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:t},"".concat(e.id,"-").concat(t)))]})]}),(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:()=>v(e.id),style:{borderRadius:"50%",width:"40px",height:"40px",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",flex:"0 0 auto"},children:"\xd7"})]})},e.id))})}),(0,s.jsxs)("div",{className:"modal-asignacion-form-buttons",children:[(0,s.jsx)("button",{className:"menu-btn",onClick:()=>{let e="temp-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()));d(t=>[...t,{id:e,address:"",city:"",description:""}])},children:"+ Agregar Direcci\xf3n"}),(0,s.jsx)("button",{className:"menu-btn",onClick:()=>{let e=o.filter(e=>""!==e.address.trim()).map(e=>{if("string"==typeof e.id&&e.id.startsWith("temp")){let{id:t,...n}=e;return n}return e});l&&l(e),n()},children:"Guardar Cambios"}),(0,s.jsx)("button",{className:"cancel-btn",onClick:n,children:"Cancelar"})]})]})}):null},x=()=>{let[e,t]=(0,a.useState)(""),[n,l]=(0,a.useState)(""),[i,r]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[j,b]=(0,a.useState)([]),[v,g]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),C=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let f=async()=>{if(!e||!i||!c||!h||(addresses.length,0)){alert("Por favor completa todos los campos obligatorios.");return}try{await (0,o._U)({name:e,surname:n,document:i,email:c,phone:u,typeId:h,addresses:j}),alert("Cliente agregado exitosamente."),w()}catch(e){alert("Error al agregar cliente."),console.error(e)}},w=()=>{t(""),l(""),r(""),d(""),m(""),x(""),b([])};return(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"nombre",type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"apellido",type:"text",value:n,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"tipoDocumento",children:"Tipo ID"}),(0,s.jsxs)("div",{className:"dropdown",ref:C,children:[(0,s.jsxs)("button",{id:"tipoDocumento",type:"button",className:"dropdown-trigger ".concat(y?"open":""),onClick:()=>N(e=>!e),children:[(0,s.jsx)("span",{children:h||"Seleccionar Tipo ID"}),(0,s.jsx)("span",{className:"arrow",children:"▼"})]}),y&&(0,s.jsx)("div",{className:"dropdown-content",children:["CC","TI","NIT","CE","PA"].map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>{x(e),N(!1)},children:e},t))})]})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"documento",type:"text",value:i,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"phone",type:"text",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("button",{type:"button",className:"menu-btn",onClick:()=>g(!0),children:["\uD83D\uDCCD Editar Direcciones (",j.length,")"]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:f,children:"➕ AGREGAR"}),(0,s.jsx)("button",{type:"reset",className:"cancel-btn",onClick:()=>{(e||n||i||c||u||h)&&window.confirm("\xbfDeseas borrar todos los campos?")&&w()},children:"❌ CANCELAR"})]}),v&&(0,s.jsx)(p,{cliente:{addresses:j},onClose:()=>g(!1),onGuardar:e=>{b(e)}})]})};n(8128);let j=()=>{let[e,t]=(0,a.useState)("edit"),[n,l]=(0,a.useState)(""),[i,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[h,j]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(""),[f,w]=(0,a.useState)(""),[D,S]=(0,a.useState)([]),[k,E]=(0,a.useState)(""),[A,I]=(0,a.useState)(!1),[R,L]=(0,a.useState)(""),[F,O]=(0,a.useState)(!1),[M,T]=(0,a.useState)(!1),[U,q]=(0,a.useState)(!1),G=(0,a.useRef)(null);(0,a.useEffect)(()=>{i&&(d(i.typeId||""),j(i.name||""),v(i.surname||""),y(i.document||""),C(i.email||""),w(i.phone||""),S(i.addresses||[]),E(i.city||""))},[i]),(0,a.useEffect)(()=>{let e=e=>{G.current&&!G.current.contains(e.target)&&q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let B=t=>{t?(r(t),"edit"===e?I(!0):"delete"===e&&O(!0),L("")):(r(null),I(!1),O(!1),L("Cliente no encontrado."))},_=async()=>{if(!i)return;let e={typeId:c,name:h,surname:b,email:N,phone:f,addresses:D,city:k,document:g};try{console.log(e),await (0,o.R1)(i.document,e),alert("Cliente actualizado correctamente ✅")}catch(e){alert("Error al actualizar cliente ❌"+e)}},P=()=>{l(""),r(null),I(!1),O(!1),L("")};return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"empleados-wrapper",children:(0,s.jsxs)("div",{className:"empleados-tab-container",children:[(0,s.jsxs)("div",{className:"empleados-tabs",children:[(0,s.jsx)("button",{className:"empleados-tab ".concat("edit"===e?"active":""),onClick:()=>{t("edit"),P()},children:"✏️ Editar"}),(0,s.jsx)("button",{className:"empleados-tab ".concat("add"===e?"active":""),onClick:()=>{t("add"),P()},children:"➕ Agregar"}),(0,s.jsx)("button",{className:"empleados-tab ".concat("delete"===e?"active":""),onClick:()=>{t("delete"),P()},children:"\uD83D\uDDD1️ Eliminar"})]}),(0,s.jsx)("div",{className:"empleados-content-area",children:"edit"===e?A?(0,s.jsxs)("div",{className:"empleados-form-grid",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"nombre",children:"Nombre(s)"}),(0,s.jsx)("input",{id:"nombre",type:"text",value:h,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"apellido",children:"Apellido(s)"}),(0,s.jsx)("input",{id:"apellido",type:"text",value:b,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"documento",children:"N\xb0 Documento"}),(0,s.jsx)("input",{id:"documento",type:"text",value:g,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"email",type:"email",value:N,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"N\xb0 Celular - Telefono"}),(0,s.jsx)("input",{id:"phone",type:"text",value:f,onChange:e=>w(e.target.value)})]}),(0,s.jsxs)("button",{type:"button",className:"menu-btn",onClick:()=>T(!0),children:["\uD83D\uDCCD Editar Direcciones (",D.length,")"]}),(0,s.jsxs)("div",{className:"empleados-form-buttons empleados-full-width",children:[(0,s.jsx)("button",{type:"button",className:"menu-btn",onClick:P,children:"\uD83D\uDD04 NUEVA B\xdaSQUEDA"}),(0,s.jsx)("button",{type:"submit",className:"menu-btn",onClick:_,children:"\uD83D\uDCBE GUARDAR CAMBIOS"}),(0,s.jsx)("button",{type:"reset",className:"cancel-btn",onClick:P,children:"❌ CANCELAR"})]})]}):(0,s.jsx)(u,{value:n,onChange:e=>l(e.target.value),onResultado:B,mensajeError:R}):"add"===e?(0,s.jsx)(x,{}):"delete"===e?F?(0,s.jsx)(m,{cliente:i,onVolver:P}):(0,s.jsx)(u,{value:n,onChange:e=>l(e.target.value),onResultado:B,mensajeError:R}):null})]})}),M&&(0,s.jsx)(p,{cliente:i,onClose:()=>T(!1),onGuardar:e=>{S(e),r(t=>({...t,addresses:e}))}})]})},b=()=>{let[e,t]=(0,a.useState)("infoGeneral");return(0,s.jsxs)("div",{className:"layout",children:[(0,s.jsx)(r,{onNavClick:e=>{t(e)},seccionActiva:e}),(()=>{switch(e){case"infoGeneral":default:return(0,s.jsx)(c,{});case"listaClientes":return(0,s.jsx)(d,{});case"editarClientes":return(0,s.jsx)(j,{})}})()]})}},4619:(e,t,n)=>{"use strict";n.d(t,{AX:()=>g,El:()=>h,GZ:()=>l,JV:()=>x,Jq:()=>a,Qb:()=>u,R1:()=>d,Ue:()=>j,VU:()=>m,Yu:()=>i,_U:()=>c,bM:()=>b,co:()=>y,fS:()=>C,g_:()=>v,he:()=>o,qP:()=>f,x_:()=>r,xb:()=>N,z2:()=>p});let s=n(3464).A.create({baseURL:"https://cleanapp-h3eyafdghheqecev.eastus-01.azurewebsites.net/",headers:{"Content-Type":"application/json"}}),a=async()=>{let{data:e}=await s.get("/service/all");return e},l=async e=>{let{data:t}=await s.post("/schedule",e);return t},i=async()=>{let{data:e}=await s.get("/client");return e},r=async e=>{let{data:t}=await s.get("/client/clientsByCity/".concat(encodeURIComponent(e)));return t},c=async e=>{let{data:t}=await s.post("/client",e);return t},o=async e=>{let{data:t}=await s.get("/client/".concat(e));return t},d=async(e,t)=>{await s.put("/client/".concat(e),t)},u=async e=>{await s.delete("/client/".concat(e))},m=async()=>{let{data:e}=await s.get("/employee");return e},h=async e=>{let{data:t}=await s.get("/employee/id/".concat(e));return t},p=async e=>{let{data:t}=await s.post("/employee/new",e);return t},x=async e=>{let{data:t}=await s.get("/employee/city/".concat(encodeURIComponent(e)));return t},j=async(e,t)=>{let{data:n}=await s.patch("/employee/update/".concat(e),t);return n},b=async e=>{await s.delete("/employee/delete/".concat(e))},v=async(e,t,n,a)=>{let{data:l}=await s.get("/employee/available",{params:{date:e,startHour:t,endHour:n,city:a}});return l},g=async(e,t,n)=>{let{data:a}=await s.get("/schedule/servicesEmployee/".concat(e),{params:{year:t,month:n}});return a},y=async e=>{let{data:t}=await s.get("/schedule/".concat(e));return t},N=async(e,t,n,a)=>{let l={};n&&(l.city=n),e&&(l.name=e),t&&(l.surname=t);let i=Object.keys(l).length?{params:l}:{},{data:r}=await s.get("/schedule/".concat(a,"/filter"),i);return r},C=async(e,t)=>{console.log("Actualizando servicio:",e,t);let{data:n}=await s.patch("/schedule/".concat(e),t);return n},f=async e=>{await s.delete("/schedule/".concat(e))}},8128:()=>{},9521:(e,t,n)=>{"use strict";n.d(t,{k:()=>i,p:()=>r});var s=n(838),a=n(2115);let l=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Error al cargar ciudades");return e.json()});function i(){let e="https://cleanapp-h3eyafdghheqecev.eastus-01.azurewebsites.net/",{data:t,error:n}=(0,s.Ay)(e?"".concat(e,"/address/cities"):null,l);return{ciudades:t||[],isLoading:!n&&!t,isError:!!n}}function r(){let{startHour:e=6,endHour:t=18,stepMinutes:n=30}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMemo)(()=>{let s=[];for(let a=e;a<t;a++)for(let e=0;e<60;e+=n){let t="".concat(String(a).padStart(2,"0"),":").concat(String(e).padStart(2,"0"),":00"),n=new Date;n.setHours(a,e);let l=n.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});s.push({value:t,label:l})}return s},[e,t,n])}},9794:(e,t,n)=>{Promise.resolve().then(n.bind(n,2467))}},e=>{var t=t=>e(e.s=t);e.O(0,[884,169,874,705,441,684,358],()=>t(9794)),_N_E=e.O()}]);